% !TEX TS-program = lualatex
\documentclass[notoc,notitlepage]{tufte-book}
% \nonstopmode % uncomment to enable nonstopmode

\usepackage{classnotetitle}

\title{PMATH451 --- Measure and Integration}
\author{Johnson Ng}
\subtitle{Class notes for Fall 2019}
\credentials{BMath (Hons), Pure Mathematics major, Actuarial Science Minor}
\institution{University of Waterloo}

\usepackage{fontspec}
\setmainfont{P052-Roman.otf}[
  Ligatures=TeX,
  BoldFont = P052-Bold.otf,
  ItalicFont = P052-Italic.otf,
  BoldItalicFont = P052-BoldItalic.otf ]
\input{latex-classnotes-preamble.tex}

\DeclareMathOperator{\Vol}{Vol}

\theoremprework{\textcolor{cyan}{\hrule height 2pt width \textwidth}}
\theoremheaderfont{\color{cyan}\normalfont\bfseries}
\theorempostwork{\textcolor{cyan}{\hrule height 2pt width \textwidth}}
\theoremindent10pt
\newtheorem*{homework}{\faCogs\ Homework}

% disjoint union
\makeatletter
\providerobustcmd*{\bigcupdot}{%
   \mathop{%
     \mathpalette\bigop@dot\bigcup
   }%
}
\providerobustcmd*{\cupdot}{%
  \mathop{%
    \mathpalette\bigop@dot\cup
  }%
}
\newrobustcmd*{\bigop@dot}[2]{%
   \setbox0=\hbox{$\m@th#1#2$}%
   \vbox{%
     \lineskiplimit=\maxdimen
     \lineskip=-0.7\dimexpr\ht0+\dp0\relax
     \ialign{%
       \hfil##\hfil\cr
       $\m@th\cdot$\cr
       \box0\cr
     }%
   }%
}
\makeatother

\begin{document}
\input{latex-classnotes-header.tex}
\clearpage
\begin{fullwidth}
  \renewcommand{\listtheoremname}{\textsl{List of Homework}}
  \listoftheorems[ignoreall, show={homework}]
\end{fullwidth}

\chapter*{Preface}%
\label{chp:preface}
\addcontentsline{toc}{chapter}{Preface}
% chapter preface

Assignment problems is introduced in class as we go,
so we have the special environment \textcolor{cyan}{homework}
for these in this note.

I included a special chapter in the appendix (see
\cref{chp:deep_dives_into_proofs}) that records and provides
insights into what drove the direction(s) of certain proofs.
This is an attempt to resolve the problem of proofs
being overly obscure with its motivations.
Contents presented in this appendix are typically like rough work,
and so are typically much longer than the presented proof.

I also made an appendix for some of the common themes and tricks
(see \cref{chp:common_themes_and_tricks})
that are seen repeatedly in this topic
I think it is invaluable that they are noted down, because the ideas
that these commonalities carry forward.

% chapter preface (end)

\chapter{Lecture 1 Sep 04th, 2019}%
\label{chp:lecture_1_sep_04th_2019}
% chapter lecture_1_sep_04th_2019

\section{Motivation for the Study of Measures}%
\label{sec:motivation_for_the_study_of_measures}
% section motivation_for_the_study_of_measures

Recall Riemann integration.

\begin{defnnonum}[Riemann Integration]\index{Riemann Integration}\label{defn:riemann_integration}
  Let $f : [a, b] \to \mathbb{R}$ be a \hlnotec{bounded} function.
  We call
  \begin{equation*}
    P = \{ a = x_0 < x_1 < \hdots < x_n = b \} \subseteq [a, b]
  \end{equation*}
  a \hldefn{partition} of $[a, b]$,
  and
  \begin{equation*}
    \Delta x_i = x_i - x_{i-1}
  \end{equation*}
  as the \hlnoteb{length of the $i$\textsuperscript{th} interval}
  for $i = 1, \ldots, n$.
  \begin{marginfigure}
    \centering
    \begin{tikzpicture}
      \draw[->] (-0.5, 0) -- (3, 0);
      \draw[->] (0, -0.5) -- (0, 3);
      \draw[domain=0.5:2.2,range=0:3] plot ({\x}, {-(\x-1)*(\x-1) + 2});
      \node[label={270:{$x_{i-1}$}}] at (0.5, 0) {|};
      \node[label={270:{$x_{i}$}}] at (2.2, 0) {|};
      \draw[dashed] (1, 2) -- (-0.5, 2) node[left] {$M_i$};
      \draw[dashed] (2.2, 0.56) -- (-0.5, 0.56) node[left] {$m_i$};
    \end{tikzpicture}
    \caption{Idea of Riemann integration}\label{fig:idea_of_riemann_integration}
  \end{marginfigure}
  Let
  \begin{equation*}
    M_i = \sup \{ f(x) : x \in [x_{i-1}, x_i] \}
  \end{equation*}
  be the \hlnoteb{supremum of $f$ on the $i$\textsuperscript{th} interval},
  and 
  \begin{equation*}
    m_i = \inf \{ f(x) : x \in [x_{i-1}, x_i] \}
  \end{equation*}
  be the \hlnoteb{infimum of $f$ on the $i$\textsuperscript{th} interval}.
  We define the \hldefn{Riemann upper sum} as
  \begin{equation*}
    U(f, P) = \sum_{i} M_i \Delta x_i,
  \end{equation*}
  and the \hldefn{Riemann lower sum} as
  \begin{equation*}
    L(f, P) = \sum_{i} m_i \Delta x_i. 
  \end{equation*}
  We define the \hldefn{Riemann upper integral} as
  \begin{equation*}
    \overline{\int_{a}^{b}} f \dif{x} = \inf_{P} U(f, P)
  \end{equation*}
  and the \hldefn{Riemann lower integral} as
  \begin{equation*}
    \underline{\int_{a}^{b}} f \dif{x} = \sup L(f, P).
  \end{equation*}
  We say that $f$ is \hldefn{Riemann integrable} if
  \begin{equation*}
    \overline{\int_{a}^{b}} f \dif{x}
    = \underline{\int_{a}^{b}} f \dif{x},
  \end{equation*}
  and we write the integral of $f$ as
  \begin{equation*}
    \int_{a}^{b} f \dif{x}
    = \overline{\int_{a}^{b}} f \dif{x}
    = \underline{\int_{a}^{b}} f \dif{x}.
  \end{equation*}
\end{defnnonum}

As hyped up as one does earlier in university about Riemann integration,
there are functions that are not Riemann integrable!

\begin{eg}
  Consider a function $f : [0, 1] \to \mathbb{R}$ given by
  \begin{equation*}
    f(x) = \begin{cases}
      1 & x \in \mathbb{Q} \\
      0 & x \notin \mathbb{Q}
    \end{cases}.
  \end{equation*}
  Then
  \begin{equation*}
    \overline{\int_{a}^{b}} f \dif{x} = 1 \text{ and }
    \underline{\int_{a}^{b}} f \dif{x} = 0.
  \end{equation*}
  Thus $f$ is not Riemann integrable.
\end{eg}

\begin{note}[Shortcomings of the Riemann integral]
  \begin{enumerate}
    \item We cannot characterize functions that are Riemann integrable,
      i.e. we do not have a list of characteristics that we can check
      against to see if a function is Riemann integrable.

      This remained an open problem in the earlier 1920s.
    \item The Riemann integral behaves badly when it comes to
      pointwise limits of functions. The next example shall illustrate
      this.
    \item The Riemann integral is awkward when $f$ is unbounded.
      In particular, we used to hack our way around by looking at
      whether the Riemann integral converges to some value the function
      approaches the unbounded point, and then ``conclude''
      that the integral is the limit of that convergence.
    \item Recall that the \hlnotea{Fundamental Theorem of Calculus} states
      that
      \begin{equation*}
        \frac{\dif{}}{\dif{x}} \int_{a}^{x} f(t) \dif{t} = f(x).
      \end{equation*}
      We know that this works for Riemann integrals.
      By the first shortcoming, the problem here is that we do not
      fully know what are the functions that the Fundamental Theorem
      is true for.
    \item In PMATH450, we saw that Fourier developed the Fourier series,
      which is an extremely useful tool
      in solving \hlnotea{Differential Equations} using sines and cosines.
      However, the convergence of the Fourier series remains largely
      unexplained by Fourier, and we have but developed
      some roundabout ways of showing some convergence.
    \item Consider the set $R$ if Riemann integrable functions
      on the interval $[a, b]$.
      The set $R$ has a natural metric:
      \begin{equation*}
        d(f, g) = \int_{a}^{b} \abs{f - g} \dif{x}.
      \end{equation*}
      However, the metric space $(R, d)$ is \hlnotec{not complete}.
      This means many of our favorite results in PMATH351 are not usable!
    \item There are many functions that seem like they should have
      an integral, but turned out that they did not under Riemann integration.
  \end{enumerate}
\end{note}

\begin{eg}[Pointwise Limits of Riemann Integrable Functions is not necessarily Riemann Integrable]
  Let $\mathbb{Q} = \{ x_n \}_{n \in \mathbb{N}}$. Then
  consider a sequence of functions
  \begin{equation*}
    f_n(x) = \begin{cases}
      1 & x \in \{ x_1, \ldots, x_n \} \\
      0 & x \notin \{ x_1, \ldots, x_n \}
    \end{cases}.
  \end{equation*}
  It is rather clear that
  \begin{equation*}
    \overline{\int_{a}^{b}} f \dif{x} = \underline{\int_{a}^{b}} f \dif{x} = 0.
  \end{equation*}
  However, the pointwise limit of the $f_n$'s, and that is
  \begin{equation*}
    \lim_{n \to \infty} f_n(x) = f(x) = \begin{cases}
      1 & x \in \mathbb{Q} \\
      0 & x \notin \mathbb{Q}
    \end{cases},
  \end{equation*}
  is, as mentioned in the last example, not Riemann integrable.
\end{eg}

To address the shortcomings of the Riemann integral,
Henri Lebesgue developed the \hlnotea{Lebesgue integral},
of which we have seen in PMATH450.

Instead of dividing the $x$-axis,
Lebesgue decided to divide the $y$-axis first.

If the range of a function $f$ is $[c, d]$, where $c, d$ can be infinite,
then we partition the interval such that
\begin{equation*}
  P = \{ c = y_0 < y_1 < \hdots < y_n = d \},
\end{equation*}
and we define
\begin{equation*}
  E_i = \{ x : f(x) \in [y_{i-1}, y_i] \}.
\end{equation*}
Then if $A_i$ is the area of the ``rectangle'' for
the $i$\textsuperscript{th} interval of $[c, d]$, we have
\begin{equation*}
  y_{i-1} \cdot \ell(E_i) \leq A_i \leq y_i \cdot \ell(E_i),
\end{equation*}
where $\ell(E_i)$ is the \hlnotea{Lebesgue measure} of the set $E_i$.
Then if we let $\int_{a}^{b} f$ denote the Lebesgue integral of $f$,
we would expect
\begin{equation*}
  \sum_{i=1}^{n} y_{i-1} \cdot \ell(E_i)
  \leq \int_{a}^{b} f
  \leq \sum_{i=1}^{n} y_i \cdot \ell(E_i).
\end{equation*}
However, to truly understand what this means,
we need to understand what the Lebesgue measure is.

Furthermore, recall that in PMATH450, we saw that not all
sets, in $\mathbb{R}$ for example, are measurable,
and for `good' reasons, there always exists non-measurable sets.

% section motivation_for_the_study_of_measures (end)

\section{Algebras and \texorpdfstring{$\sigma$}{sigma}-Algebra of Sets}%
\label{sec:algebras_and_sigma_algebra_of_sets}
% section algebras_and_sigma_algebra_of_sets

\marginnote{For this course, we shall use the convention that
\begin{itemize}
  \item the `ambient' space $X$ is always non-empty;
  \item $\mathcal{P}(X)$, the power set of $X$, has non-trivial elements; and
  \item we denote $A^C = \{ x \in X : x \notin A \}$ for $A \subseteq X$.
\end{itemize}
}

\begin{defn}[Algebra of Sets]\index{Algebra of Sets}\label{defn:algebra_of_sets}
  Given $X$, a non-empty collection of subsets of $X$,
  i.e. $\emptyset \neq \mathcal{A} \subseteq \mathcal{P}(X)$,
  is called an \hlnoteb{algebra of sets} of $X$ provided that:
  \begin{enumerate}
    \item $A_1, \ldots, A_n \in \mathcal{A} \implies
      \bigcup_{i=1}^{n} A_i \in \mathcal{A}$; and
    \item $A \in \mathcal{A} \implies A^C \in \mathcal{A}$.
  \end{enumerate}
\end{defn}

\begin{propo}[Properties of Algebra of Sets]\index{Properties of Algebra of Sets}\label{propo:properties_of_algebra_of_sets}
  If $\mathcal{A}$ is an algebra of sets of $X$, then
  \begin{enumerate}
    \setcounter{enumi}{2}
    \item $\emptyset, X \in \mathcal{A}$;
    \item $A, B \in \mathcal{A} \implies
      A \setminus B = \{ x \in X \mid x \in A \land x \notin B \} \in
      \mathcal{A}$ ; and
    \item $A_1, \ldots, A_n \in \mathcal{A} \implies
      \bigcap_{i=1}^{n} A_i \in \mathcal{A}$.
  \end{enumerate}
\end{propo}

\begin{proof}
  \begin{enumerate}
    \setcounter{enumi}{2}
    \item $\mathcal{A} \neq \emptyset \implies \exists A \in \mathcal{A}
      \implies A^C \in \mathcal{A} \implies A \cup A^C = X \in \mathcal{A}
      \implies \emptyset = X^C \in \mathcal{A}$.
    \item $A, B \in \mathcal{A} \implies A^C \in \mathcal{A}
      \implies A^C \cup B \in \mathcal{A}
      \implies A \setminus B = (A^C \cup B)^C \in \mathcal{A}$.
    \item (\hlnotea{De Morgan's Law})
      Notice that
      $(A_1 \cap A_2 \cap \hdots \cap A_n)^C
      = A_1^C \cup A_2^C \cup \hdots A_n^C \in \mathcal{A}$
      since $A_i^C \in \mathcal{A}$.
      Thus the complement
      \begin{equation*}
        A_1 \cap A_2 \cap \hdots \cap A_n \in \mathcal{A}.
      \end{equation*}
  \end{enumerate}
\end{proof}

\begin{defn}[$\sigma$-Algebra of Sets]\index{$\sigma$-Algebra of Sets}\label{defn:_sigma_algebra_of_sets}
  Given $X$ and $\emptyset \neq \mathcal{A} \subseteq \mathcal{P}(X)$,
  we say that $\mathcal{A}$ is a \hlnoteb{$\sigma$-algebra of sets}
  of $X$ if it is an algebra of sets and
  \begin{equation*}
    \forall A_n \in \mathcal{A}, n \in \mathbb{N}, \quad
    \bigcup_{n \in \mathbb{N}} A_n \in \mathcal{A}.
  \end{equation*}
\end{defn}

\begin{eg}\label{eg:examples_of_sigma_algebra}
  \begin{enumerate}
    \item $\mathcal{P}(X)$ is a $\sigma$-algebra.
    \item Consider $X$ as an infinite set.
      We say that a set $A$ is \hldefn{cofinite} if $A^C$ is finite.
      Let
      \begin{equation*}
        \mathcal{A} \coloneqq \{ A \in \mathcal{P}(X)
          \mid A \text{ is finite or cofinite } \}.
      \end{equation*}
      Then $\mathcal{A}$ is an algebra of sets:
      \begin{itemize}
        \item finite union of finite sets remains finite;
        \item finite union of finite and cofinite sets remains cofinite; and
        \item complement of finite sets are the cofinite sets and vice versa.
      \end{itemize}
      However, $\mathcal{A}$ is \hlnotec{not} a $\sigma$-algebra:
      consider $A_n = \{ 2^n \} \subseteq X = \mathbb{N}$,
      which we then realize that
      \begin{equation*}
        \bigcup_{n \in \mathbb{N}} A_n = \text{ set of all even numbers },
      \end{equation*}
      but the set of all even numbers is clearly not finite, and
      its complement, which is the set of all odd numbers, is not finite.
    \item Consider $X$ as an uncountable set.
      We say that a set $A$ is \hldefn{co-countable} if $A^C$ is countable.
      \sidenote{Recall that a set $A$ is said to be countable if
      there is a one-to-one correspondence between elements of $A$
      and the natural numbers.}
      The set
      \begin{equation*}
        \mathcal{A} \coloneqq \{ A \subseteq X
          \mid A \text{ is countable or co-countable } \}
      \end{equation*}
      is a $\sigma$-algebra:
      \begin{itemize}
        \item countable union of countable sets is countable;
        \item countable union of countable
          and co-countable sets is co-countable; and
        \item complement of countable sets are co-countable and vice versa.
      \end{itemize}
  \end{enumerate}
\end{eg}

% section algebras_and_sigma_algebra_of_sets (end)

% chapter lecture_1_sep_04th_2019 (end)

\chapter{Lecture 2 Sep 06th 2019}%
\label{chp:lecture_2_sep_06th_2019}
% chapter lecture_2_seep_06th_2019

\section{Algebra and \texorpdfstring{$\sigma$}{Sigma}-algebra of Sets (Continued)}%
\label{sec:algebra_and_sigma_algebra_of_sets_continued}
% section algebra_and_sigma_algebra_of_sets_continued

We've seen some examples of $\sigma$-algebras.
Let's now look at some other important properties of $\sigma$-algebras.

\begin{propo}[Closure of $\sigma$-algebras under Countable Intersection]\label{propo:closure_of_sigma_algebras_under_countable_intersection}
  Let $X$ be a set, $\mathcal{A}$ a $\sigma$-algebra on $X$.
  If $A_n \in \mathcal{A}$ for each $n \in \mathbb{N}$,
  then $\bigcap_{n} A_n \in \mathcal{A}$.
\end{propo}

This follows rather similarly to \cref{propo:properties_of_algebra_of_sets}
where we used \hlnotea{De Morgan's Law}.

\begin{proof}
  We observe that
  \begin{align*}
    A_n \in \mathcal{A}
    &\implies A_n^C \in \mathcal{A} \\
    &\implies \bigcup_{n} A_n^C \in \mathcal{A} \\
    &\implies \bigcap_{n} A_n = \left( \bigcup_{n} A_n^C \right)^C \in \mathcal{A}.
  \end{align*}
\end{proof}

Let $\mathcal{A}_\alpha \subseteq \mathcal{P}(X)$,
where $\alpha$ is from some index set.
We denote
\begin{equation*}
  \bigcap_{\alpha} \mathcal{A}_\alpha = \{ A \subseteq X
    : A \in \mathcal{A}_\alpha,\; \forall \alpha \}.
\end{equation*}

\begin{propo}[Existence of the `Smallest' $\sigma$-algebra on a Set]\label{propo:existence_of_the_smallest_sigma_algebra_on_a_set}
  Let $X$ be a set and $\{\mathcal{A}_\alpha\}_\alpha$ as
  a collection of $\sigma$-algebras on $X$.
  Then $\bigcap_{\alpha} A_\alpha$ is a $\sigma$-algebra.
\end{propo}

\begin{proof}
  \begin{align*}
  A \in \bigcap_{\alpha} \mathcal{A}_\alpha
  &\implies \forall \alpha,\, A \in \mathcal{A}_\alpha \\
  &\implies \forall \alpha,\, A^C \in \mathcal{A}_\alpha \\
  &\implies A^C \in \bigcap_{\alpha} \mathcal{A}_\alpha
  \end{align*}
  and
  \begin{align*}
  \forall n \in \mathbb{N},\, A_n \in \bigcap_{\alpha} \mathcal{A}_\alpha
  &\implies \forall n \in \mathbb{N},\, \forall \alpha,\,
    A_n \in \mathcal{A}_\alpha \\
  &\implies \forall \alpha,\, \bigcup_{n} A_n \in \mathcal{A}_\alpha \\
  &\implies \bigcup_{n} A_n \in \bigcap_{\alpha} \mathcal{A}_\alpha.
  \end{align*}
\end{proof}

Due to the above proposition, the following definition is well-defined.

\begin{defn}[Generator of a $\sigma$-algebra]\index{Generator of a $\sigma$-algebra}\label{defn:generator_of_a_sigma_algebra}
  Let $X$ be a set, and $\xi \subseteq \mathcal{P}(X)$ has some
  non-trivial set(s).
  Consider all $\sigma$-algebras $\mathcal{A}_\alpha$
  with the property that $\xi \subseteq \mathcal{A}_\alpha$.
  Then we say that $\bigcap_{\alpha} \mathcal{A}_\alpha$
  is the $\sigma$-algebra generated by $\xi$,
  and we denote this generated $\sigma$-algebra as
  \begin{equation*}
    \mathfrak{M}(\xi) = \bigcap_{\alpha} \mathcal{A}_\alpha.
  \end{equation*}
\end{defn}

\begin{remark}
  \begin{enumerate}
    \item It is clear from the definition that if $\mathcal{A}$
      is a $\sigma$-algebra on $X$ and $\xi \subseteq \mathcal{A}$,
      then $\mathfrak{M}(\xi) \subseteq \mathcal{A}$.
    \item We often say that $\mathfrak{M}(\xi)$ is the
      ``smallest $\sigma$-algebra containing $\xi$''.
  \end{enumerate}
\end{remark}

The following is an example of such a $\sigma$-algebra.

\begin{defn}[Borel $\sigma$-algebra]\index{Borel $\sigma$-algebra}\label{defn:borel_sigma_algebra}
  Let $X$ be a metric space (or topological space).
  The $\sigma$-algebra generated by the \hlnotec{open subsets}
  of $X$ is called the \hlnoteb{Borel $\sigma$-algebra},
  of which we denote by $\mathfrak{B}(X)$.
\end{defn}

\begin{remark}[Some sets in $\mathfrak{B}(X)$]
  Given an arbitrary metric space (or topological space) $X$.
  It is often hard to firmly grasp what kind of sets are in
  the Borel $\sigma$-algebra $\mathfrak{B}(X)$.
  The following are some examples that are in $\mathfrak{B}(X)$.
  \begin{enumerate}
    \item Let $\{ \mathcal{O}_n \}_{n \in \mathbb{N}}$ denote
      a countable collection of open sets.
      By \cref{propo:closure_of_sigma_algebras_under_countable_intersection},
      $\bigcap_{n} \mathcal{O}_n \in \mathfrak{B}(X)$.
      We call these countable union of open sets
      as $G_\delta$ sets.
    \item Let $\{ \mathcal{F}_n \}_{n \in \mathbb{N}}$ denote
      a countable collection of closed sets.
      By \cref{propo:closure_of_sigma_algebras_under_countable_intersection},
      $\bigcup_{n} \mathcal{F}_n \in \mathfrak{B}(X)$.
      We call these countable intersection of closed sets
      as $F_\sigma$ sets.
    \item Let $\{ H_n \}$ be a countable collection of $G_\delta$ sets.
      Then $\bigcup_{n} H_n \in \mathfrak{B}(X)$.
      These are called the $G_{\delta \sigma}$ sets.
    \item Let $\{ K_n \}$ be a countable collection of $F_\sigma$ sets.
      Then $\bigcap_{n} K_n \in \mathfrak{B}(X)$.
      These are called the $F_{\sigma \delta}$ sets.
  \end{enumerate}
  We can continue constructing the $G_{\delta \sigma \hdots}$
  and $F_{\sigma \delta \hdots}$ similarly,
  and all these sets belong to the Borel $\sigma$-algebra
  $\mathfrak{B}(X)$.
\end{remark}

\begin{propo}[Other Formulations of the Borel $\sigma$-algebra (aka Proposition 1.2)]\label{propo:other_formulations_of_the_borel_sigma_algebra}\label{propo:1.2}
  The following collection of sets are all equal:
  \begin{enumerate}
    \item $\mathfrak{B}_1 = \mathfrak{B}(\mathbb{R})$;
    \item $\mathfrak{B}_2 =$ $\sigma$-algebra generated by open intervals
      (e.g. $(a, b)$);
    \item $\mathfrak{B}_3 =$ $\sigma$-algebra generated by closed intervals
      (e.g. $[a, b]$);
    \item $\mathfrak{B}_4 =$ $\sigma$-algebra generated by half-open intervals
      (e.g. $(a, b]$);
    \item $\mathfrak{B}_5 =$ $\sigma$-algebra generated by $(-\infty, a)$
      and $(b, \infty)$; and
    \item $\mathfrak{B}_6 =$ $\sigma$-algebra generated by $(-\infty, a]$
      and $[b, \infty)$.
  \end{enumerate}
\end{propo}

As commented before, it is often hard knowing that is in
a Borel $\sigma$-algebra, and what is not, despite knowing
what its generator is.
However, when talking about containments, this is a fairly
straightforward discussion thanks to
its closure under countable unions and
\cref{propo:closure_of_sigma_algebras_under_countable_intersection}.
We simply need to talk about the generators.

\begin{proof}
  \hlbnoted{$\mathfrak{B}_2 \subseteq \mathfrak{B}_1$}
  Given an arbitrary generator $(a, b)$ in $\mathfrak{B}_2$,
  we know that $(a, b)$ is an open set,
  and clearly $(a, b) \subseteq \mathbb{R}$.
  Thus $(a, b) \in \mathfrak{B}_1$,
  so $\mathfrak{B}_2 \subseteq \mathfrak{B}_1$.

  \noindent
  \hlbnoted{$\mathfrak{B}_3 \subseteq \mathfrak{B}_2$}
  Given an arbitrary generator $[a, b]$ of $\mathfrak{B}_2$,
  we have
  \begin{equation*}
    [a, b] = \bigcap_{n} \left( a - \frac{1}{n},\, b + \frac{1}{n} \right)
      \in \mathfrak{B}_2.
  \end{equation*}
  Thus $\mathfrak{B}_3 \subseteq \mathfrak{B}_2$.

  \noindent
  \hlbnoted{$\mathfrak{B}_4 \subseteq \mathfrak{B}_3$}
  Given an arbitrary generator $(a, b]$ of $\mathfrak{B}_4$,
  \begin{equation*}
    (a, b] = \bigcup_{n} \left[ a + \frac{1}{n},\, b \right]
      \in \mathfrak{B}_3.
  \end{equation*}
  Thus $\mathfrak{B}_4 \subseteq \mathfrak{B}_3$.

  \noindent
  \hlbnoted{$\mathfrak{B}_5 \subseteq \mathfrak{B}_4$}
  Given an arbitrary generator $(-\infty, a)$ for $\mathfrak{B}_5$,
  \begin{equation*}
    (-\infty, a) = \bigcup_{n} \left( -\infty,\, a - \frac{1}{n} \right)
      \in \mathfrak{B}_4.
  \end{equation*}
  On the other hand, for $(b, \infty)$ in $\mathfrak{B}_5$,
  \begin{equation*}
    (b, \infty) = \bigcup_{n} (b, n) \in \mathfrak{B}_4.
  \end{equation*}

  \noindent
  \hlbnoted{$\mathfrak{B}_6 \subseteq \mathfrak{B}_5$}
  We have that
  \begin{equation*}
    (-\infty, a] = \bigcap_{n} \left( -\infty,\, a + \frac{1}{n} \right)
      \in \mathfrak{B}_5
  \end{equation*}
  and
  \begin{equation*}
    [b, \infty) = \bigcap_{n} \left( b - \frac{1}{n}, \infty \right)
      \in \mathfrak{B}_5.
  \end{equation*}

  \noindent
  \hlbnoted{$\mathfrak{B}_1 \subseteq \mathfrak{B}_6$}
  Let $c < d \in \mathbb{R}$.
  Notice that
  \begin{equation*}
    (-\infty, d] \cap [c, \infty) = [c, d] \in \mathfrak{B}_6.
  \end{equation*}
  Furthermore,
  \begin{equation*}
    (c, d) = \bigcup_{n} \left[ c + \frac{1}{n},\, d - \frac{1}{n} \right]
      \in \mathfrak{B}_6.
  \end{equation*}
  Recall that given an open set $\mathcal{O} \subseteq \mathbb{R}$,
  we have
  \begin{equation*}
    \mathcal{O} = \bigcup \{ (c, d) \subseteq \mathcal{O} : c, d \in \mathbb{Q} \},
  \end{equation*}
  which shows that $\mathcal{O}$ is a countable union of open sets
  (with rational endpoints).
  It follows that $\mathcal{O} \in \mathfrak{B}_6$ and so
  $\mathfrak{B}_1 \subseteq \mathfrak{B}_6$.
\end{proof}

\begin{ex}
  Show that $\mathfrak{B}(\mathbb{R}^2)$ is generated by
  open rectangles $(a, b) \times (c, d)$.
\end{ex}

\begin{defn}[Infinitely Often]\index{Infinitely Often}\label{defn:infinitely_often}
  Given $E_n \subseteq X$ for $n \in \mathbb{N}$,
  we say that $x \in E_n$ \hlnoteb{infinitely often (i.o.)} if
  \begin{equation*}
    \{ n : x \in E_n \}
  \end{equation*}
  is an \hlnotec{infinite set}.
  We typically let
  \begin{equation*}
    A \coloneqq \{ x \in X : x \in E_n \text{ i.o. } \}
  \end{equation*}
  be the set of $x$'s that are in the $E_n$'s infinitely often.
\end{defn}

\begin{defn}[Almost always]\index{Almost always}\label{defn:almost_always}
  Given $E_n \subseteq X$ for $n \in \mathbb{N}$,
  we say that $x \in E_n$ \hlnoteb{almost always (a.a.)} if
  \begin{equation*}
    \{ n : x \notin E_n \}
  \end{equation*}
  is a \hlnotec{finite set}.
  We typically let
  \begin{equation*}
    B \coloneqq \{ x \in X : x \in E_n \text{ a.a. } \}
  \end{equation*}
  be the set of $x$'s that are in the $E_n$'s almost always.
\end{defn}

\begin{homework}[Homework 1]\label{homework:1}
  Let $X$ be a set, $\mathcal{A}$ a $\sigma$-algebra on $X$,
  and $E_n \in \mathcal{A}$ for $n \in \mathbb{N}$.
  Prove that
  \begin{equation*}
    A \coloneqq \{ x \in X : x \in E_n \text{ i.o. } \}
  \end{equation*}
  and
  \begin{equation*}
    B \coloneqq \{ x \in X : x \in E_n \text{ a.a. } \}
  \end{equation*}
  are both in $\mathcal{A}$.
\end{homework}

\begin{defn}[Characteristic Function]\index{Characteristic Function}\label{defn:characteristic_function}
  Let $E \subseteq X$. We call the function 
  \begin{equation*}
    \chi_E(x) = \begin{cases}
      1 & x \in E \\
      0 & x \notin E
    \end{cases}
  \end{equation*}
  the \hlnoteb{characteristic function} of $E$.
\end{defn}

\begin{homework}[Homework 2 -- A review on limsup and liminf]\label{homework:2}
  Let $E_n \subseteq X$ for $n \in \mathbb{N}$, and
  \begin{gather*}
    A \coloneqq \{ x \in X : x \in E_n \text{ i.o. } \} \\
    B \coloneqq \{ x \in X : x \in E_n \text{ a.a. } \}.
  \end{gather*}
  Show that
  \begin{gather*}
    \chi_A(x) = \limsup_{n} \chi_{E_n}(x) \\
    \chi_B(x) = \liminf_{n} \chi_{E_n}(x).
  \end{gather*}
\end{homework}

\begin{remark}
  Due to the above result, some people write
  \begin{gather*}
    A = \limsup E_n \\
    B = \liminf E_n.
  \end{gather*}
\end{remark}

% section algebra_and_sigma_algebra_of_sets_continued (end)

\section{Measures}%
\label{sec:measures}
% section measures

\begin{defn}[Measure]\index{Measure}\label{defn:measure}
  Let $X$ be a set and $\mathcal{A}$ a $\sigma$-algebra of subsets of $X$.
  A function $\mu : \mathcal{A} \to [0, \infty]$ is called
  a \hlnoteb{measure} on $\mathcal{A}$ provided that:
  \begin{enumerate}
    \item $\mu(\emptyset) = 0$; and
    \item if $E_n \in \mathcal{A}$ for each $n \in \mathbb{N}$,
      and $\{ E_n \}$ is disjoint, we have
      \begin{equation*}
        \mu \left( \bigcup_{n} E_n \right) = \sum_{n} \mu(E_n).
      \end{equation*}
  \end{enumerate}
\end{defn}

% section measures (end)

% chapter lecture_2_sep_06th_2019 (end)

\chapter{Lecture 3 Sep 9th 2019}%
\label{chp:lecture_3_sep_9th_2019}
% chapter lecture_3_seep_9th_2019

\section{Measures (Continued)}%
\label{sec:measures_continued}
% section measures_continued

\begin{defn}[Measure Space]\index{Measure Space}\label{defn:measure_space}
  Let $X$ be a set, $\mathfrak{M}$ a $\sigma$-algebra of subsets of $X$
  and $\mu : \mathfrak{M} \to [0, \infty]$.
  We call the 3-tuple $(X, \mathfrak{M}, \mu)$ a \hlnoteb{measure space}.
\end{defn}

\begin{remark}
  If $\mu(X) = 1$, we also call $(X, \mathfrak{M}, \mu)$ a
  \hldefn{probability space},
  and $\mu$ is called a \hldefn{probability measure}.
\end{remark}

\begin{eg}\label{eg:examples_of_measures}
  \begin{enumerate}
    \item (\hldefn{Counting Measure})
      Let $X$ be a set and $\mathfrak{M} = \mathcal{P}(X)$.
      For $E \in \mathfrak{M}$, define
      \begin{equation*}
        \mu(E) = \begin{cases}
          \abs{E} & E \text{ is finite } \\
          \infty  & \text{ otherwise }
        \end{cases}.
      \end{equation*}
      We verify that $\mu$ is indeed a measure:
      \begin{enumerate}
        \item We have that $\mu(\emptyset) = \abs{\emptyset} = 0$.
        \item Let $\{ E_n \}_{n=1}^{\infty} \subseteq \mathfrak{M}$
          be a pairwise disjoint set.
          Notice that if any of the sets are infinite,
          say $E_{N_0}$ is infinite, then
          \begin{equation*}
            \mu(E_{N_0}) = \infty = \abs{ E_{N_0} }.
          \end{equation*}
          Since $\bigcup_{n=1}^{\infty} E_n$ is infinite in this case,
          we have
          \begin{equation*}
            \mu \left( \bigcup_{n=1}^{\infty} E_n \right) = \infty
            = \abs{ \bigcup_{n=1}^{\infty} E_n }.
          \end{equation*}
          On the other hand, if all the sets are finite,
          then since the $E_n$'s are disjoint, we have
          \begin{equation*}
            \mu \left( \bigcup_{n=1}^{\infty} E_n \right)
            = \abs{\bigcup_{n=1}^{\infty} E_n}
            = \sum_{n=1}^{\infty} \abs{E_n}
            = \sum_{n=1}^{\infty} \mu(E_n).
          \end{equation*}
      \end{enumerate}
      We call $\mu$ a counting measure.

    \item Let $X$ be an uncountable set.
      Recall that in \cref{eg:examples_of_sigma_algebra},
      we showed that
      \begin{equation*}
        \mathfrak{M} \coloneqq \{ A \subseteq X
          \mid A \text{ is countable or co-countable } \}
      \end{equation*}
      is a $\sigma$-algebra.
      There are many measures that we can define on this $\sigma$-algebra.
      For instance,
      \begin{equation*}
        \nu(E) = \begin{cases}
          0 & E \text{ is countable } \\
          1 & E \text{ is uncountable }
        \end{cases},
      \end{equation*}
      and
      \begin{equation*}
        \delta(E) = \begin{cases}
          0 & E \text{ is countable } \\
          \infty & E \text{ is uncountable }
        \end{cases}.
      \end{equation*}
      Verifying that both $\nu$ and $\delta$ are indeed
      measures shall be left to the reader as
      a straightforward exercise.

    \item Let's make a non-example.
      Let $X$ be an infinite set, and $\mathfrak{M} = \mathcal{P}(X)$.
      Define
      \begin{equation*}
        \mu(E) = \begin{cases}
          0 & E \text{ is finite } \\
          \infty & E \text{ is infinite }
        \end{cases}.
      \end{equation*}
      Consider $X = \mathbb{N}$
      and a sequence of sets with singletons,
      \begin{equation*}
        E_n = \{ 2n + 1 \},\quad \text{ for } n \in \mathbb{N}.
      \end{equation*}
      Clearly,
      \begin{equation*}
        \bigcup_{n=1}^{\infty} E_n = \text{ set of all odd numbers },
      \end{equation*}
      and clearly
      \begin{equation*}
        \mu \left( \bigcup_{n=1}^{\infty} E_n \right) = \infty.
      \end{equation*}
      However, notice that
      \begin{equation*}
        \mu(E_n) = 0 \text{ for each } n \in \mathbb{N}.
      \end{equation*}
      Since each of the $E_n$'s are pairwise disjoint,
      we should have
      \begin{equation*}
        \infty = \mu \left( \bigcup_{n=1}^{\infty} E_n \right)
        = \sum_{n=1}^{\infty} \mu(E_n) = 0,
      \end{equation*}
      which is impossible.
      Thus $\mu$ is \hlnotec{not} a measure.
  \end{enumerate}
\end{eg}

\begin{remark}[Finite additivity]
  Given a finite set of pairwise disjoint sets
  $\{ E_n \}_{n=1}^{N} \subseteq \mathfrak{M}$ for some $\sigma$-algebra
  $\mathfrak{M}$ of some set $X$.
  By \hyperref[defn:_sigma_algebra_of_sets]{the definition of a
  $\sigma$-algebra}, we may set $E_n = \emptyset$ for $n > N$.
  Then
  \begin{equation*}
    \mu \left( \bigcup_{n=1}^{N} E_n \right)
    = \mu \left( \bigcup_{n=1}^{\infty} E_n \right)
    = \sum_{n=1}^{\infty} \mu (E_n)
    = \sum_{n=1}^{N} \mu(E_n).
  \end{equation*}
  We call this the \hldefn{finite additivity} of a measure.
\end{remark}

\begin{defn}[Finitivity, $\sigma$-finitivity, and Semi-finitivity of a Measure]\index{Finite measure}\index{$\sigma$-finite measure}\index{Semi-finite measure}\label{defn:finitivity_sigma_finitivity_and_semi_finitivity_of_a_measure}
  Let $(X, \mathfrak{M}, \mu)$ be a measure space.
  \begin{enumerate}
    \item We say that $\mu$ is \hlnoteb{finite} if $\mu(E) < \infty$
      for every $E \in \mathfrak{M}$.
    \item If $X = \bigcup_{n=1}^{\infty} X_n$ with $X_n \in \mathfrak{M}$,
      we say that $\mu$ is \hlnoteb{$\sigma$-finite} if
      \begin{equation*}
        \mu(X_n) < \infty \text{ for every } n \in \mathbb{N}.
      \end{equation*}
    \item We say that $\mu$ is \hlnoteb{semi-finite} if for every
      $E \in \mathfrak{M}$ with $\mu(E) = \infty$,
      $\exists F \subseteq E \in \mathfrak{M}$ such that
      \begin{equation*}
        0 < \mu(F) < \infty.
      \end{equation*}
  \end{enumerate}
\end{defn}

\begin{ex}
  \begin{enumerate}
    \item Show that the counting measure is finite iff
      the ambient space $X$ is a finite set.
    \item Show that $\delta$ in \cref{eg:examples_of_measures}
      is neither finite, $\sigma$-finite, nor semi-finite.
  \end{enumerate}
\end{ex}

\begin{thm}[Properties of a Measure]\label{thm:properties_of_a_measure}
  Let $(X, \mathfrak{M}, \mu)$ be a measure space. Then
  \begin{enumerate}
    \item (\hlnotea{Monotonicity})
      If $E \subseteq F$ and $E, F \in \mathfrak{M}$,
      then $\mu(E) \leq \mu(F)$.
    \item (\hlnotea{Subadditivity})
      If $\{ E_n \}_{n=1}^{\infty} \subseteq \mathfrak{M}$, then
      \begin{equation*}
        \mu \left( \bigcup_{n} E_n \right) \leq \sum_{n} \mu(E_n).
      \end{equation*}
    \item (\hlnotea{Continuity from below})
      If $\{ E_n \}_{n=1}^{\infty} \subseteq \mathfrak{M}$ is
      an increasing sequence of sets, i.e.
      \begin{equation*}
        E_1 \subseteq E_2 \subseteq \hdots \subseteq E_n \subseteq \hdots,
      \end{equation*}
      then
      \begin{equation*}
        \mu \left( \bigcup_{n=1}^{\infty} E_n \right)
        = \lim_{n \to \infty} \mu(E_n).
      \end{equation*}
    \item (\hlnotea{Continuity from above})
      If $\{ E_n \}_{n=1}^{\infty} \subseteq \mathfrak{M}$ is
      a decreasing sequence of sets, i.e.
      \begin{equation*}
        E_1 \supseteq E_2 \supseteq \hdots \supseteq E_n \supseteq \hdots,
      \end{equation*}
      and $\exists n_0 \in \mathbb{N}$ such that $\mu(E_{n_0}) < \infty$,
      then
      \begin{equation*}
        \mu \left( \bigcap_{n=1}^{\infty} E_n \right)
        = \lim_{n \to \infty} \mu(E_n).
      \end{equation*}
  \end{enumerate}
\end{thm}

\begin{remark}[A comment on the condition for the 4\textsuperscript{th} statement]
  It may seem that the extra condition of a finite measure
  seem extravagant. However, it is necessary, as demonstrated below.

  Consider $X = \mathbb{N}$, with $\mu$ as the counting measure.
  Then, consider the sequence of sets
  \begin{align*}
    E_1 &= \{ 1, 2, 3, \ldots \}, \\
    E_2 &= \{ 2, 3, 4, \ldots \}, \\
    E_3 &= \{ 3, 4, 5, \ldots \}, \\
       &\vdots \\
    E_n &= \{ n, n + 1, n + 2, \ldots \}, \\
       &\vdots
  \end{align*}
  Then $\bigcap_{n=1}^{\infty} E_n = \emptyset$, which then
  $\mu \left( \bigcap_{n=1}^{\infty} E_n \right) = 0$.
  However,
  \begin{equation*}
    \mu(E_n) = \infty \text{ for each } n \in \mathbb{N}.
  \end{equation*}
\end{remark}

\begin{homework}[Homework 3]\label{homework:3}
  Let $(X, \mathfrak{M}, \mu)$ be a measure space.
  Let $\{ E_n \}_{n=1}^{\infty} \subseteq \mathfrak{M}$, and
  \begin{equation*}
    A \coloneqq \{ x \in X \mid x \in E_n \text{ i.o. } \}.
  \end{equation*}
  Prove that $\sum_{n=1}^{\infty} \mu(E_n) < \infty$
  implies that $\mu(A) = 0$.
\end{homework}

% section measures_continued (end)

% chapter lecture_3_sep_9th_2019 (end)

\chapter{Lecture 4 Sep 11th 2019}%
\label{chp:lecture_4_sep_11th_2019}
% chapter lecture_4_seep_11th_2019

\section{Measures (Continued 2)}%
\label{sec:measures_continued_2}
% section measures_continued_2

We shall now prove \cref{thm:properties_of_a_measure}.

\begin{proof}
  \begin{enumerate}
    \item Notice that
      \begin{equation*}
        F = (F \cap E) \cup (F \setminus E),
      \end{equation*}
      and $F \cap E$ and $F \setminus E$ are disjoint.
      Thus
      \begin{equation*}
        \mu(F) = \mu(F \cap E) + \mu(F \setminus E)
             = \mu(E) + \mu(F \setminus E).
      \end{equation*}
      Since $\mu(F \setminus E) \geq 0$, we have
      \begin{equation*}
        \mu(F) \geq \mu(E).
      \end{equation*}

    \item Consider a sequence of sets defined as such:
      \sidenote{\faStar This is a common technique in measure theory.
      We will see this repeatedly so in this course.}
      \begin{align*}
        F_1 &= E_1 \\
        F_2 &= E_2 \setminus E_1 \\
            &\vdots \\
        F_n &= E_n \setminus \bigcup_{j=1}^{n-1} E_j.
      \end{align*}
      First, note that $F_n \subseteq E_n$ for each $n \in \mathbb{N}$.
      So by the last part, we have
      \begin{equation*}
        \mu(F_n) \leq \mu(E_n) \text{ for each } n \in \mathbb{N}.
      \end{equation*}
      Secondly,
      \begin{equation*}
        \bigcup_{n=1}^{\infty} F_n = \bigcup_{n=1}^{\infty} E_n.
      \end{equation*}
      Also, $\{ F_n \}_{n=1}^{\infty}$ is a pairwise disjoint collection of
      sets.
      It follows that
      \begin{equation*}
        \mu \left( \bigcup_{n=1}^{\infty} E_n \right)
        = \mu \left( \bigcup_{n=1}^{\infty} F_n \right)
        = \sum_{n=1}^{\infty} \mu(F_n)
        \leq \sum_{n=1}^{\infty} \mu(E_n).
      \end{equation*}

    \item Consider a sequence of sets defined as such:
      \begin{align*}
        F_1 &= E_1 \\
        F_2 &= E_2 \setminus E_1 \\
        F_3 &= E_3 \setminus E_2 \\
            &\vdots \\
        F_n &= E_n \setminus E_{n-1}.
      \end{align*}
      We see that
      \begin{itemize}
        \item $\bigcup_{n=1}^{\infty} F_n = \bigcup_{n=1}^{\infty} E_n$;
        \item $\bigcup_{n=1}^{N} F_n = \bigcup_{n=1}^{N} E_n = E_N$; and
        \item $\{ F_n \}_{n}$ is a collection pairwise disjoint sets.
      \end{itemize}
      Thus we have
      \begin{align*}
        \mu \left( \bigcup_{n=1}^{\infty} E_n \right)
        &= \mu \left( \bigcup_{n=1}^{\infty} F_n \right)
        = \sum_{n=1}^{\infty} \mu(F_n) \\
        &= \lim_{N \to \infty} \sum_{n=1}^{N} \mu(F_n)
        = \lim_{N \to \infty} \mu \left( \bigcup_{n=1}^{N} F_n \right) \\
        &= \lim_{N \to \infty} \mu(E_N).
      \end{align*}
    \item First, it is important that we notice that
      \begin{equation*}
        \bigcap_{n=1}^{\infty} E_n = \bigcap_{n=m}^{\infty} E_n
      \end{equation*}
      for any $m \in \mathbb{N}$, since $\{ E_n \}_{n}$ is a
      decreasing sequence of sets.

      Suppose $n_0 \in \mathbb{N}$ is such that $\mu(E_{n_0}) < \infty$.
      Consider a sequence of sets defined as follows:
      for $n_0 \leq j \in \mathbb{N}$, we let $F_j = E_{n_0} \setminus E_j$.
      Then we have
      \begin{equation*}
        \emptyset = F_{n_0} \subseteq F_{n_0 + 1} \subseteq \hdots \subseteq
        F_{n_0 + k} \subseteq \hdots,
      \end{equation*}
      i.e. $\{ F_n \}_{n=n_0}^{\infty}$ is an increasing sequence
      of sets.
      By the last part, we have
      \begin{align*}
        \mu \left( \bigcup_{n=n_0}^{\infty} F_n \right)
        &= \lim_{n \to \infty} \mu(F_{n_0 + n})
        = \lim_{n \to \infty} \mu(E_{n_0} \setminus E_{n_0 + n}) \\
        &= \mu(E_{n_0}) - \lim_{n \to \infty} \mu(E_{n_0 + n}) \\
        &= \mu(E_{n_0}) - \lim_{n \to \infty} \mu(E_n).
      \end{align*}

      Furthermore, we observe that
      \begin{equation*}
        \bigcup_{n=1}^{\infty} F_n = E_{n_0} \setminus \bigcap_{n=n_0}^{\infty} E_n.
      \end{equation*}
      Thus
      \begin{align*}
        \mu \left( \bigcup_{n=n_0}^{\infty} F_n \right)
        &= \mu \left( E_{n_0} \setminus \bigcap_{n=n_0}^{\infty} E_n \right)
        = \mu(E_{n_0}) - \mu \left( \bigcap_{n=n_0}^{\infty} E_n \right) \\
        &= \mu(E_{n_0}) - \mu \left( \bigcap_{n=1}^{\infty} E_n \right).
      \end{align*}
      It follows that indeed
      \begin{equation*}
        \mu \left( \bigcap_{n=1}^{\infty} E_n \right)
        = \lim_{n \to \infty} \mu(E_n).
      \end{equation*}
  \end{enumerate}
\end{proof}

\begin{ex}
  Let $(X, \mathfrak{M}, \mu)$ be a measure space.
  Show that
  \begin{enumerate}
    \item $\mu$ is
      \hyperref[defn:finitivity_sigma_finitivity_and_semi_finitivity_of_a_measure]{finite}
      iff $\mu(X) < \infty$.
    \item $\mu$ is $\sigma$-finite implies that $\mu$ is semi-finite.
  \end{enumerate}
\end{ex}

\begin{solution}
  \begin{enumerate}
    \item This is rather simple.

      \hlbnoted{$(\implies)$} $\mu$ is finite implies that each $E \in \mathfrak{M}$
      has a finite measure. In particular, $X \in \mathfrak{M}$,
      and so $\mu(X) < \infty$.

      \hlbnoted{$(\impliedby)$} $\forall E \in \mathfrak{M}$, $E \subseteq X$, 
      thus by the first item in \cref{thm:properties_of_a_measure},
      we have $\mu(E) \leq \mu(X) < \infty$. Thus $\mu$ is finite.

    \item $\mu$ being $\sigma$-finite means that if $X = \bigcup_{n=1}^{\infty}
      X_n$ where $X_n \in \mathfrak{M}$, then $\mu(X_n) < \infty$ for each $n$.
      Let $E \in \mathfrak{M}$ such that $\mu(E) = \infty$.
      If we take
      \begin{equation*}
        E_n = X_n \cap E,
      \end{equation*}
      then $\mu(E_n) < \infty$ for each $n \in \mathbb{N}$.
      Then, taking a union of any finite number of these $E_n$'s
      will give us a subset of $E$ with a finite measure.
      Hence, $\mu$ is indeed semi-finite.
  \end{enumerate}
\end{solution}

\begin{defn}[Null Set of a Measure]\index{Null Set}\index{$\mu$-null set}\label{defn:null_set_of_a_measure}
  Let $(X, \mathfrak{M}, \mu)$ be a measure space.
  The set
  \begin{equation*}
    \mathcal{N} \coloneqq \{ N \in \mathfrak{M} : \mu(N) = 0 \}
  \end{equation*}
  is called the \hlnoteb{$\mu$-null set},
  or the \hlnoteb{null set} of the measure $\mu$.
\end{defn}

\begin{remark}
  \begin{enumerate}
    \item If $N_j \in \mathcal{N}$, then
      $\bigcup_{n=1}^{\infty} N_j \in \mathcal{N}$.
      \sidenote{Requires elab}
    \item If $N \in \mathcal{N}$, and \hlnotec{$E \in \mathfrak{M}$}
      and $E \subseteq N$,
      then $E \in \mathcal{N}$.

      It is important to note there that the highlighted condition is required,
      since not all subsets of $N$ are measurable.
    \item $\mathcal{N}$ is \hlnotec{not} a $\sigma$-algebra.
      If we picked an $X$ such that $\mu(X) \neq 0$,
      then $\emptyset \in \mathcal{N}$ but $X \notin \mathcal{N}$.
  \end{enumerate}
\end{remark}

\begin{defn}[Complete Measure Space]\index{Complete Measure Space}\label{defn:complete_measure_space}
  Let $(X, \mathfrak{M}, \mu)$ be a measure space.
  We say that the space is \hlnoteb{complete} if
  $N \in \mathcal{N}$ and $E \subseteq N$, then $E \in \mathfrak{M}$.
  In this case, we also say that $\mu$ is a \hldefn{complete measure}
  on $\mathfrak{M}$.
\end{defn}

\begin{remark}
  By the first item in \cref{thm:properties_of_a_measure},
  we have that if $\mu(E) = 0$, and so $E \in \mathcal{N}$ as well.
\end{remark}

\begin{thm}[Extending the Measurable Sets]\label{thm:extending_the_measurable_sets}
  Let $(X, \mathfrak{M}, \mu)$ be a measure space and
  \begin{equation*}
    \mathcal{N} \coloneqq \{ N \in \mathfrak{M} \mid \mu(N) = 0 \}.
  \end{equation*}
  Consider
  \begin{equation*}
    \overline{\mathfrak{M}} \coloneqq \{ E \cup F
      \mid E \in \mathfrak{M},\, F \subseteq N \in \mathcal{N} \}.
  \end{equation*}
  Then $\overline{\mathfrak{M}}$ is a $\sigma$-algebra
  which contains $\mathfrak{M}$.
  Furthermore, if we define $\overline{\mu}
  : \overline{\mathfrak{M}} \to [0, \infty]$ as
  \begin{equation*}
    \overline{\mu}(E \cup F) = \mu(E),
  \end{equation*}
  then $\overline{\mu}$ is a well-defined measure on $\overline{\mathfrak{M}}$.

  Moreover, if $\nu : \overline{\mathfrak{M}} \to [0, \infty]$ is any measure
  such that $\nu(E) = \mu(E)$ for all $E \in \mathfrak{M}$, then
  $\nu = \overline{\mu}$.
\end{thm}

% section measures_continued_2 (end)

% chapter lecture_4_sep_11th_2019 (end)

\chapter{Lecture 5 Sep 13th 2019}%
\label{chp:lecture_5_sep_13th_2019}
% chapter lecture_5_sep_13th_2019

\section{Measures (Continued 3)}%
\label{sec:measures_continued_3}
% section measures_continued_3

\begin{proof}[\nameref{thm:extending_the_measurable_sets}]
  \hlbnoted{$\overline{\mathfrak{M}}$ is a $\sigma$-algebra}
  Since $\emptyset \in \mathfrak{M}$ and $\emptyset \subseteq N$
  for any $N \in \mathcal{N}$,
  it is clear that $\emptyset \in \overline{\mathfrak{M}}$.

  Now, for $E \cup F \in \overline{\mathfrak{M}}$,
  if we suppose $F \subseteq N \in \mathcal{N}$, then
  \begin{equation*}
    \left( E \cup F \right)^C
    = \left( E \cup N \right)^C \cup \left( N \setminus E \cup F \right)
    \in \overline{\mathfrak{M}}
  \end{equation*}
  since $E \cup N \in \mathfrak{M}$ and $N \setminus (E \cup F) \in \mathcal{N}$.

  Let $\{ E_n \cup F_n \}_{n=1}^{\infty} \subseteq \overline{\mathfrak{M}}$.
  Then we observe that
  \begin{equation*}
    \bigcup_{n=1}^{\infty} (E_n \cup F_n)
    = \underbrace{\bigcup_{n=1}^{\infty} E_n}_{\in \mathfrak{M}}
      \cup \underbrace{\bigcup_{n=1}^{\infty} F_n}_{\in \mathcal{N}}
    \in \overline{\mathfrak{M}}.
  \end{equation*}

  \noindent
  \hlbnoted{Well-definedness of $\overline{\mu}$}
  Let $E_1 \cup F_1 = E_2 \cup F_2 \in \overline{\mathfrak{M}}$.
  Suppose $F_1 \subseteq N_1, F_2 \subseteq N_2 \in \mathcal{N}$.
  WTS
  \begin{equation*}
    \mu(E_1) = \overline{\mu}(E_1 \cup F_1)
          = \overline{\mu}(E_2 \cup F_2) = \mu(E_2)
  \end{equation*}
  Notice that
  \begin{equation*}
    E_1 \subseteq E_1 \cup F_1 = E_2 \cup F_2 \subseteq E_2 \cup N_2,
  \end{equation*}
  and
  \begin{equation*}
    E_2 \subseteq E_2 \cup F_2 = E_1 \cup F_1 \subseteq E_1 \cup N_1.
  \end{equation*}
  By \cref{thm:properties_of_a_measure}, in particular,
  by subadditivity,
  we have that
  \begin{equation*}
    \mu(E_1) \leq \mu(E_2 \cup N_2) \leq \mu(E_2) + 0 = \mu(E_2)
  \end{equation*}
  and
  \begin{equation*}
    \mu(E_2) \leq \mu(E_1 \cup N_1) \leq \mu(E_1) + 0 = \mu(E_1).
  \end{equation*}
  It follows that $\mu(E_1) = \mu(E_2)$, as required.

  \noindent
  \hlbnoted{$\overline{\mu}$ is a measure}
  \begin{enumerate}
    \item Since $\emptyset \in \mathfrak{M}$ and $\emptyset \in \mathcal{N}$,
      $\overline{\mu}$ is defined for $\emptyset$, and
      \begin{equation*}
        \overline{\mu}(\emptyset) = \mu(\emptyset) = 0.
      \end{equation*}
    \item Let $\{ E_n \cup F_n \}_{n=1}^{\infty}
      \subseteq \overline{\mathfrak{M}}$ be a pairwise disjoint collection.
      We observe that
      \begin{align*}
        \overline{\mu} \left( \bigcup_{n=1}^{\infty} (E_n \cup F_n) \right)
        &= \overline{\mu} \left( \bigcup_{n=1}^{\infty} E_n \cup
          \bigcup_{n=1}^{\infty} F_n \right) \\
        &= \mu \left( \bigcup_{n=1}^{\infty} E_n \right) \\
        &= \sum_{n=1}^{\infty} \mu(E_n),
      \end{align*}
      and
      \begin{align*}
        \sum_{n=1}^{\infty} \overline{\mu} (E_n \cup F_n)
        = \sum_{n=1}^{\infty} \mu(E_n).
      \end{align*}
      Hence
      \begin{equation*}
        \overline{\mu} \left( \bigcup_{n=1}^{\infty} (E_n \cup F_n) \right)
        = \sum_{n=1}^{\infty} \overline{\mu} (E_n \cup F_n).
      \end{equation*}
  \end{enumerate}

  \noindent
  \hlbnoted{$\nu = \overline{\mu}$}
  Let $E \cup F \in \overline{\mathfrak{M}}$.
  Suppose $F \subseteq N \in \mathfrak{M}$
  By monotonicity,
  \begin{equation*}
    \overline{\mu}(E \cup F) = \mu(E) = \nu(E) \leq \nu(E \cup F).
  \end{equation*}
  By subadditivity,
  \begin{equation*}
    \nu(E \cup F)
    \leq \nu(E) + \nu(F)
    \leq \mu(E) + \nu(N)
    \leq \overline{\mu}(E \cup F) + \mu(N)
    = \overline{\mu}(E \cup F) + 0.
  \end{equation*}
  Thus, indeed,
  \begin{equation*}
    \nu(E \cup F) = \overline{\mu}(E \cup F).
  \end{equation*}
\end{proof}

% section measures_continued_3 (end)

\section{The Outer Measure}%
\label{sec:the_outer_measure}
% section the_outer_measure

In this section, we will show that one way we can construct a measure
is by using an outer measure.

\begin{defn}[Outer Measure]\index{Outer Measure}\label{defn:outer_measure}
  Given a set $X$, a function
  \begin{equation*}
    \mu^* : \mathcal{P}(X) \implies [0, \infty]
  \end{equation*}
  is called an \hlnoteb{outer measure} if
  \begin{enumerate}
    \item $\mu^*(\emptyset) = 0$; 
    \item (\hlnotea{monotonicity}) if $E \subseteq F$, then
      $\mu^*(E) \leq \mu^*(F)$; and
    \item (\hlnotea{countable subadditivity})
      if $\{ A_n \}_{n} \subseteq \mathcal{P}(X)$, then
      \begin{equation*}
        \mu^* \left( \bigcup_{n=1}^{\infty} A_n \right)
          \leq \sum_{n=1}^{\infty} \mu^*(A_n).
      \end{equation*}
  \end{enumerate}
\end{defn}

Coming from PMATH450, we have seen an example of an outer measure.

\begin{propo}[Lebesgue's Outer Measure]\index{Lebesgue's Outer Measure}\label{propo:lebesgue_s_outer_measure}
  Given $E \subseteq \mathbb{R}$, consider
  \begin{equation*}
    \mu^*(E) \coloneqq \inf \left\{ 
      \sum_{n=1}^{\infty} (b_n - a_n)
        : E \subseteq \bigcup_{n=1}^{\infty} (a_n, b_n)
    \right\}.
  \end{equation*}
  $\mu^*$ is Lebesgue's outer measure.
\end{propo}

\begin{proof}
  \begin{enumerate}
    \item It is clear that $\mu^*(\emptyset) = \emptyset$,
      since we can pick all $(a_n, b_n) = \emptyset$.
    \item Suppose $A \subseteq B \subseteq \mathbb{R}$.
      It is clear that any collection of intervals whose union contain $B$
      will contain $A$, but there are such collections for $A$ that do not
      contain $B$.
      This means that
      \begin{equation*}
        \mu^*(A) \leq \mu^*(B)
      \end{equation*}
      by the property of the infimum.
    \item Let $E = \bigcup_{i=1}^{\infty} E_i$.
      WTS $\mu^*(E) \leq \sum_{i=1}^{\infty} \mu^*(E_i)$.

      Now if $\mu^*(E_i) = \infty$ for any $i$,
      then the inequality is trivially true.
      Thus, wma $\mu^*(E_i) < \infty$ for all $i$.

      \sidenote{This is also a common trick in measure theory.}
      Let $\epsilon > 0$.
      By the definition of the infimum, for each $i$,
      we can pick a countable sequence
      $\{ (a_n^i, b_n^i) \}_{n=1}^{\infty} \subseteq \mathcal{P}(X)$
      such that $E_1 \subseteq \bigcup_{n=1}^{\infty} (a_n^i, b_n^i)$ and
      \begin{equation*}
        \sum_{n=1}^{\infty} (b_n^i - a_n^i)
        \leq \mu^*(E_i) + \frac{\epsilon}{2^i}.
      \end{equation*}
      Then
      \begin{equation*}
        E = \bigcup_{i=1}^{\infty} E_i
        = \bigcup_{i=1}^{\infty} \bigcup_{n=1}^{\infty} (a_n^i, b_n^i).
      \end{equation*}
      And so it follows that
      \begin{align*}
        \mu^*(E)
        &\leq \sum_{i=1}^{\infty} \sum_{n=1}^{\infty} (b_n^i - a_n^i) \\
        &\leq \sum_{i=1}^{\infty} \mu^*(E_i)
          + \sum_{i=1}^{\infty} \frac{\epsilon}{2^i} \\
        &= \sum_{i=1}^{\infty} \mu^*(E_i) + \epsilon.
      \end{align*}
      Since $\epsilon$ was arbitrary, it follows that
      \begin{equation*}
        \mu^*(E) \leq \sum_{i=1}^{\infty} \mu^*(E_i).
      \end{equation*}
  \end{enumerate}
\end{proof}

\begin{ex}
  Show that had we defined Lebesgue's outer measure with closed intervals,
  i.e.
  \begin{equation*}
    \tilde{\mu}^*(E) \coloneqq \inf \left\{ 
      \sum_{n=1}^{\infty} (b_n - a_n)
        : E \subseteq \bigcup_{n=1}^{\infty} [a_n, b_n]
    \right\},
  \end{equation*}
  $\tilde{\mu}^*$ is still an outer measure.

  In fact, we can do so for half-open intervals.
\end{ex}

\begin{eg}[Lebesgue-Stieltjes Outer Measure]\label{eg:lebesgue_stieltjes_outer_measure}
  Let $F : \mathbb{R} \to \mathbb{R}$ be an increasing function
  that is continuous from the right.
  Let
  \begin{equation*}
    \mu^*(E) \coloneqq \inf \left\{ 
      \sum_{n=1}^{\infty} ( F(b_n) - F(a_n) )
      : E \subseteq \bigcup_{n=1}^{\infty} (a_n, b_n]
    \right\}.
  \end{equation*}
  Then $\mu^*$ is an outer measure.
\end{eg}

\begin{remark}
  Again, we could have defined the above outer measure using 
  open or closed intervals.
\end{remark}

\begin{eg}[Lebesgue's Outer Measure on $\mathbb{R}^2$]
  Let $E \subseteq \mathbb{R}^2$, and
  \begin{equation*}
    \mu^*(E) \coloneqq \inf \left\{ 
      \sum_{n=1}^{\infty} A(R_n)
        : E \subseteq \bigcup_{n=1}^{\infty} R_n
    \right\},
  \end{equation*}
  where $A$ is the `area' function, and $R_n = (a_n, b_n) \times (c_n, d_n)$
  are open rectangles.
  Then $\mu^*$ is an outer measure.
\end{eg}

\begin{remark}
  \begin{enumerate}
    \item Again, we can define the above outer measure using closed rectangles,
      or half-open rectangles.
    \item We can continue defining an outer measure for
      $\mathbb{R}^3$ using cubes,
      for $\mathbb{R}^4$ using hypercubes, and so on.
  \end{enumerate}
\end{remark}

We want to now show that given an outer measure,
we can always construct a measure.
This is known as Carathéodory's Theorem.

This requires the following definition:

\begin{defn}[$\mu^*$-measurability]\index{$\mu^*$-measurability}\label{defn:_mu_measurability}
  A set $A \subseteq X$ is said to be \hlnoteb{$\mu^*$-measurable}
  if $\forall E \subseteq X$,
  \begin{equation*}
    \mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^C).
  \end{equation*}
\end{defn}

\begin{remark}
  \begin{enumerate}
    \item By subadditivity, we always have
      \begin{equation*}
        \mu^*(E) \leq \mu^*(E \cap A) + \mu^*(E \cap A^C),
      \end{equation*}
      since $E = (E \cap A) \cup (E \cap A^C)$.
    \item Note that $E \cap A^C = E \setminus A$.
      In a sense, $A$ is said to be $\mu^*$-measurable
      if it can slice any subset of $X$ such that we have
      additivity of the sliced parts.
      We may also say that $A$ is a `universal slicer'.
  \end{enumerate}
\end{remark}

\begin{thm}[Carathéodory's Theorem]\index{Carathéodory's Theorem}\label{thm:caratheodory_s_theorem}
  If $\mu^*$ is an outer measure on a set $X$, let
  \begin{equation*}
    \mathfrak{M} \coloneqq \{ A \subseteq X
      : A \text{ is } \mu^*\text{-measureable} \}.
  \end{equation*}
  Then $\mathfrak{M}$ is a $\sigma$-algebra, and we set
  \begin{equation*}
    \mu : \mathfrak{M} \to [0, \infty]
  \end{equation*}
  such that
  \begin{equation*}
    \mu(A) = \mu^*(A).
  \end{equation*}
  Then $\mu$ is a \hyperref[defn:complete_measure_space]{complete measure}
  on $\mathfrak{M}$.
\end{thm}

% section the_outer_measure (end)

% chapter lecture_5_sep_13th_2019 (end)

\chapter{Lecture 6 Sep 16th 2019}%
\label{chp:lecture_6_sep_16th_2019}
% chapter lecture_6_sep_16th_2019

\section{The Outer Measure (Continued)}%
\label{sec:the_outer_measure_continued}
% section the_outer_measure_continued

\begin{homework}[Homework 4]\label{homework:4}
  Let $\mathfrak{M}$ be an algebra of sets on $X$, and whenever
  $\{ A_n \}_{n \in \mathbb{N}} \subseteq \mathfrak{M}$ is a disjoint 
  collection of sets, then $\bigcup_{n} A_n \in \mathfrak{M}$.
  Then $\mathfrak{M}$ is a $\sigma$-algebra.
\end{homework}

\begin{homework}[Homework 5]\label{homework:5}
  Recall that Lebesgue's Outer Measure on $\mathbb{R}$ is defined as
  \begin{equation*}
    \mu^*(E) \coloneqq \inf \left\{ 
      \sum_{n=1}^{\infty} (b_n - a_n)
      : E \subseteq \bigcup_{n=1}^{\infty} (a_n, b_n)
    \right\}.
  \end{equation*}
  Prove that we can equivalently define
  \begin{equation*}
    \mu^*(E) \coloneqq \inf \left\{ 
      \sum_{n=1}^{\infty} (b_n - a_n)
      : E \subseteq \bigcup_{n=1}^{\infty} (a_n, b_n]
    \right\}.
  \end{equation*}
  Similarly, Lebesgue's Outer Measure on $\mathbb{R}^2$ is defined as
  \begin{equation*}
    \mu_2^*(E) = \inf \left\{ 
      \sum_{n=1}^{\infty} (b_n - a_n)(d_n - c_n)
      : E \subseteq \bigcup_{n=1}^{\infty} (a_n, b_n) \times (c_n, d_n)
    \right\}.
  \end{equation*}
  Prove that we can equivalently define
  \begin{equation*}
    \mu_2^*(E) = \inf \left\{ 
      \sum_{n=1}^{\infty} (b_n - a_n)(d_n - c_n)
      : E \subseteq \bigcup_{n=1}^{\infty} (a_n, b_n] \times (c_n, d_n]
    \right\}.
  \end{equation*}
\end{homework}

\begin{defn}[Metric Outer Measure]\index{Metric Outer Measure}\label{defn:metric_outer_measure}
  Let $(X, d)$ be a metric space, and $A, B \subseteq X$, and
  \begin{equation*}
    d(A, B) = \inf \left\{ d(x, y) : x \in A,\, y \in B \right\}.
  \end{equation*}
  An outer measure, $\mu^*$, on $X$ is called a \hlnoteb{metric outer measure}
  if whenever $d(A, B) > 0$, then
  \begin{equation*}
    \mu^*(A \cup B) = \mu^*(A) + \mu^*(B).
  \end{equation*}
\end{defn}

\begin{homework}[Homework 6]\label{homework:6}
  Prove that Lebesgue's Outer Measure on $\mathbb{R}$ is a metric outer measure.
\end{homework}

\begin{proof}[\nameref{thm:caratheodory_s_theorem}]\label{proof:caratheodory_s_theorem}
  \hlbnoted{$\mathfrak{M}$ is a $\sigma$-algebra} \\
  \hlbnotee{$\emptyset \in \mathfrak{M}$}
  Given any $E \subseteq X$, we observe that
  \begin{align*}
    \mu^*(E \cap \emptyset) + \mu^*(E \cap \emptyset^C)
    &= \mu^*(\emptyset) + \mu^*(E \cap X) \\
    &= 0 + \mu^*(E) = \mu^*(E).
  \end{align*}

  \hlbnotee{$A \in \mathfrak{M} \implies A^C \in \mathfrak{M}$}
  Observe that given any $E \subseteq X$,
  \begin{align*}
    \mu^*(E \cap A^C) + \mu^*(E \cap ( A^C )^C)
    &= \mu^*(E \cap A^C) + \mu^*(E \cap A) = \mu^*(E).
  \end{align*}
  Thus $A^C \in \mathfrak{M}$.

  \sidenote{For a deep dive, see
  \cref{sec:proving_that_m_is_closed_under_countable_unions_in_caratheodory_s_theorem}.}
  To show that $\mathfrak{M}$ is closed under countable unions,
  we break the work into several steps.

  \hlbnotee{$A, B \in \mathfrak{M} \implies A \cup B \in \mathfrak{M}$}
  Since $A \in \mathfrak{M}$, we have
  \begin{equation*}
    \mu^*(E) = \mu^*(E \cap A) + \mu^*(E \cap A^C).
  \end{equation*}
  Since $B \in \mathfrak{M}$,
  \begin{align*}
    \mu^*(E) &= \mu^*(E \cap A) + \mu^*(E \cap A^C) \\
             &= \mu^*(E \cap A \cap B) + \mu^*(E \cap A \cap B^C) \\
             &\quad+ \mu^*(E \cap A^C \cap B) + \mu^*(E \cap A^C \cap B^C) \\
             &= \mu^*(E \cap A \cap B) + \mu^*(E \cap A \cap B^C) \\
             &\quad+ \mu^*(E \cap A^C \cap B) + \mu^*(E \cap (A \cup B)^C)
  \end{align*}
  Notice that
  \begin{equation*}
    E \cap (A \cup B)
    = [E \cap A \cap B] \cupdot [E \cap A^C \cap B] \cupdot [E \cap A \cap B^C].
  \end{equation*}
  Thus
  \begin{align*}
    \mu^*(E) &= \mu^*(E \cap A) + \mu^*(E \cap A^C) \\
             &= \mu^*(E \cap A \cap B) + \mu^*(E \cap A \cap B^C) \\
             &\quad+ \mu^*(E \cap A^C \cap B) + \mu^*(E \cap (A \cup B)^C) \\
             &\geq \mu^*(E \cap (A \cup B)) + \mu^*(E \cap (A \cup B)^C).
  \end{align*}
  Thus $A \cup B \in \mathfrak{M}$.

  Consequently, by induction,
  we have that $\forall \{ A_n \}_n \subseteq \mathfrak{M}$,
  \begin{equation*}
    \bigcup_{n=1}^{N} A_n \in \mathfrak{M}
  \end{equation*}
  for all $N \in \mathbb{N}$.

  Now $\mathfrak{M}$ is an algebra of sets.
  By \nameref{homework:4}, it suffices for us to prove the following
  to show that $\mathfrak{M}$ is a $\sigma$-algebra of sets.

  \noindent
  \hlbnotee{$\forall \{ A_n \}_{n} \subseteq \mathfrak{M}$ disjoint,
  $\implies \bigcupdot_{n} A_n \in \mathfrak{M}$}
  Let $B_N = \bigcupdot_{n=1}^{N} A_n$.
  We first require the following lemma:

  \noindent
  \hlbnotec{$\forall E \subseteq X$, $\mu^*(E \cap B_N) = \sum_{n=1}^{N} \mu^*(E \cap A_n)$}
  Notice that for any $n \in \mathbb{N}$, $A_n \in \mathfrak{M}$, and so
  \begin{align*}
    \mu^*(E \cap B_N)
    &= \mu^*(E \cap B_N \cap A_n) + \mu^*(E \cap B_N \cap A_n^C) \\
    &= \mu^*(E \cap A_n) + \mu^*(E \cap B_{N-1}).
  \end{align*}
  The desired result follows by induction. \dashv

  Let $B = \bigcupdot_{n=1}^{\infty} A_n$.
  Then
  \begin{equation*}
    \mu^*(E \cap B) \leq \sum_{n=1}^{\infty} \mu^* ( E \cap A_n )
  \end{equation*}
  by subadditivity.

  Now $B_N \subseteq B$ for each $N \in \mathbb{N}$.
  This implies that $B_N^C \supseteq B^C$, and so by monotonicity,
  \begin{equation*}
    \mu^*(E \cap B_N^C) \geq \mu^*(E \cap B^C).
  \end{equation*}
  Thus, for every $N \in \mathbb{N}$,
  \begin{align*}
    \mu^*(E)
    &= \mu^*(E \cap B_N) + \mu^*(E \cap B_N^C) \\
    &\geq \sum_{n=1}^{N} \mu^*(E \cap A_n) + \mu^*(E \cap B^C).
  \end{align*}
  It follows that
  \begin{align*}
    \mu^*(E)
    &\geq \sum_{n=1}^{\infty} \mu^*(E \cap A_n) + \mu^*(E \cap B^C) \\
    &\geq \mu^*(E \cap B) + \mu^*(E \cap B^C).
  \end{align*}

  With \nameref{homework:4}, $\mathfrak{M}$ is a $\sigma$-algebra.

  \noindent
  \hlbnoted{$\mu$ is a measure}
  \begin{itemize}
    \item $\mu(\emptyset) = \mu^*(\emptyset) = 0$.
    \item Let $\{ A_n \}_{n} \subseteq \mathfrak{M}$ be a disjoint collection
      of sets, and $B = \bigcupdot_{n=1}^{\infty} A_n$.
      Then by a similar argument as the end of the last `part',
      \begin{align*}
        \mu(B) &= \mu^*(B) \\
               &\geq \sum_{n=1}^{\infty} \mu^*(B \cap A_n) + \mu^*(B \cap B^C) \\
               &= \sum_{n=1}^{\infty} \mu^*(B \cap A_n) + 0 \\
               &= \sum_{n=1}^{\infty} \mu^*(A_n) = \sum_{n=1}^{\infty} \mu(A_n).
      \end{align*}
      Thus
      \begin{equation*}
        \mu(B) = \mu \left( \bigcupdot_{n=1}^{\infty} A_n \right)
             = \sum_{n=1}^{\infty} \mu(A_n).
      \end{equation*}
  \end{itemize}

  \noindent
  \hlbnoted{$\mu$ is complete}
  Let $A \in \mathcal{N}$ and $B \subseteq A$.
  By monotonicity, $\mu(B) = \mu^*(B) \leq \mu^*(A) = 0$.
  Then
  \begin{equation*}
    \mu^*(E \cap B) + \mu^*(E \cap B^C)
    = 0 + \mu^*(E \cap B^C) \leq \mu^*(E)
  \end{equation*}
  by monotonicity. Thus $B \in \mathfrak{M}$.
  Thus $\mu$ is complete.
\end{proof}

We would like to make sure that
\begin{enumerate}
  \item there are many sets that are measurable; and
  \item the notion of a measure covers our notion of length.
\end{enumerate}

We shall see this with the \nameref{defn:metric_outer_measure},
and that the measurable sets is at least the \hlnotea{Borel set}.

% section the_outer_measure_continued (end)

\section{The Lebesgue-Stieltjes Outer Measure}%
\label{sec:the_lebesgue_stieltjes_outer_measure}
% section the_lebesgue_stieltjes_outer_measure

The Lebesgue-Stieltjes outer measure is motivated by probability theory.
The idea is that we consider the measure space $(\Omega, \mathfrak{M}, P)$,
where $\Omega$ is the sample space set,
$\mathfrak{M}$ is a $\sigma$-algebra on $\Omega$,
and $P$ is the probability measure, i.e. $P(\Omega) = 1$.

We then define a \hldefn{random variable},
which is a function $X : \Omega \to \mathbb{R}$.
The \hldefn{cumulative distribution function} (cdf)
is defined as
\begin{equation*}
  F_X(t) \coloneqq P(\{ \omega : X(\omega) \leq t \}),
\end{equation*}
and it has these properties:
\begin{enumerate}
  \item $F_X$ is increasing; and
  \item $F_X$ is right-continuous.
\end{enumerate}

\begin{eg}
  Let $\Omega = \{ H, T \}$, and define the probability measure as
  \begin{equation*}
    P(\{ H \}) = \frac{1}{2} = P(\{ T \}).
  \end{equation*}
  We can define
  \begin{equation*}
    X(T) = 0 \text{ and } X(H) = 1.
  \end{equation*}
  \begin{marginfigure}
    \centering
    \begin{tikzpicture}
      \draw[->] (-2, 0) -- (2, 0);
      \draw[->] (0, -0.5) -- (0, 2);
      \draw[color=green,line width=1.5pt] (-2, 0) -- (0, 0)
        node[line width=1pt,color=green,inner sep=1.5pt,draw,circle] {};
      \draw[color=green,line width=1.5pt]
        (0, 0.5) node[line width=1pt,inner sep=1.5pt,draw,circle,fill] {}
        -- (1, 0.5) node[line width=1pt,inner sep=1.5pt,draw,circle] {};
      \draw[color=green,line width=1.5pt]
        (1, 1) node[line width=1pt,inner sep=1.5pt,draw,circle,fill] {}
        -- (2, 1);
      \draw[dashed] (0, 1) node[left] {$1$}
        -- (1, 1) -- (1, 0) node[below] {$1$};
      \node[left] at (0, 0.5) {$\frac{1}{2}$};
    \end{tikzpicture}
    \caption{Simple example of a cdf}\label{fig:simple_example_of_a_cdf}
  \end{marginfigure}
  Then
  \begin{equation*}
    P(\{ \omega : X(\omega) = 1\}) = P(\{ H \}) = \frac{1}{2}
  \end{equation*}
  and
  \begin{equation*}
    P(\{ \omega : X(\omega) = 0 \}) = P(\{ T \}) = \frac{1}{2}.
  \end{equation*}
  In the context of probability, we often see the shorthand
  \begin{equation*}
    P(X = t) = P(\{ \omega : X(\omega) = t \}).
  \end{equation*}
\end{eg}

\begin{defn}[Lebesgue-Stieltjes Outer Measure]\label{defn:lebesgue_stieltjes_outer_measure}
  Let $F : \mathbb{R} \to \mathbb{R}$ be an increasing function
  that is continuous from the right.
  Let
  \begin{equation*}
    \mu^*(E) \coloneqq \inf \left\{ 
      \sum_{n=1}^{\infty} ( F(b_n) - F(a_n) )
      : E \subseteq \bigcup_{n=1}^{\infty} (a_n, b_n]
    \right\}.
  \end{equation*}
  Then $\mu^*$ is an outer measure.
\end{defn}

\begin{ex}
  We mentioned that the above is indeed an outer measure in
  \cref{eg:lebesgue_stieltjes_outer_measure}.
  Prove this.
\end{ex}

% section the_lebesgue_stieltjes_outer_measure (end)

% chapter lecture_6_sep_16th_2019 (end)

\chapter{Lecture 7 Sep 18th 2019}%
\label{chp:lecture_7_sep_18th_2019}
% chapter lecture_7_sep_18th_2019

\section{The Lebesgue-Stieltjes Outer Measure (Continued)}%
\label{sec:the_lebesgue_stieltjes_outer_measure_continued}
% section the_lebesgue_stieltjes_outer_measure_continued

\begin{thm}[Carathéodory's Second Theorem]\index{Carathéodory's Second Theorem}\label{thm:caratheodory_s_second_theorem}
  Let $(X, d)$ be a metric space,
  and $\mu^*$ a \nameref{defn:metric_outer_measure}.
  Then every Borel set is \hyperref[defn:_mu_measurability]{$\mu$-measurable}.
\end{thm}

\begin{proof}
  By \nameref{thm:caratheodory_s_theorem},
  \begin{equation*}
    \mathfrak{M} = \{ A \subseteq X : A \text{ is } \mu^*\text{-measurable} \}
  \end{equation*}
  is a $\sigma$-algebra.
  Then our statement says that $\mathfrak{B}(X) \subseteq \mathfrak{M}$.
  Thus, it suffices for us to show that if $U \in \mathfrak{B}(X)$,
  i.e. if $U \subseteq X$ is open, then $U \in \mathfrak{M}$.
  In particular, WTS $\forall E \subseteq X$,
  \begin{equation*}
    \mu^*(E) = \mu^*(E \cap U) + \mu^*(E \cap U^C).
  \end{equation*}
  Again, by subadditivity,
  \begin{equation*}
    E = (E \cap U) \cup (E \cap U^C) \implies
    \mu^(E) \leq \mu^*(E \cap U) + \mu^*(E \cap U^C).
  \end{equation*}
  Thus it suffices for us to show that
  \begin{equation*}
    \mu^*(E) \geq \mu^*(E \cap U) + \mu^(E \cap U^C).
  \end{equation*}
  Now if $\mu^*(E) = \infty$, this is trivially true.
  WMA $\mu^*(E) < \infty$.

  \sidenote{We look at points that get increasingly closer
  to the edge of the set $E \cap U$, or in other words,
  increasingly closer to $E \cap U^C$.}
  Consider $\{ A_k \}_{k} \subseteq \mathcal{P}(X)$ such that
  \begin{equation*}
    A_k \coloneqq \left\{ x \in E \cap U
      : d(x, E \cap U^C) \geq \frac{1}{k} \right\} \subseteq E \cap U.
  \end{equation*}
  It is clear that $A_1 \subseteq A_2 \subseteq A_3 \subseteq \hdots$,
  i.e. $\{ A_k \}_k$ is an increasing sequence of sets.
  Also, $\bigcup_{k} A_k = E \cap U$.

  For each $k \in \mathbb{N}$, notice that
  $A_k \cup (E \cap U^C) \subseteq E$.
  Thus by subadditivity and additivity over disjoint sets,
  for every $k$, we have
  \begin{equation*}
    \mu^*(E) \geq \mu^*(A_k \cup (E \cap U^C)) = \mu^*(A_k) + \mu^*(E \cap U^C).
  \end{equation*}
  Since $\{ A_k \}_k$ is an increasing sequence of sets, it follows that
  \begin{equation*}
    \mu^*(E) \geq \lim_{k \to \infty} \mu^*(A_k) + \mu^*(E \cap U^C).
  \end{equation*}

  \noindent
  \hlbnotec{Claim: $\lim_{k \to \infty} \mu^*(A_k) = \mu^*(E \cap U)$}
  Since $A_k \subseteq E \cap U$, by subadditivity,
  \begin{equation*}
    \mu^*(A_k) \leq \mu^*(E \cap U).
  \end{equation*}
  It remains to prove the other inequality.

  \sidenote{This part here requires an escape from where we already are.
  If your head is in the muddle, stop reading, go out, walk,
  and then come back.

  Here, we ask ourselves: so what if we look at how much the $A_k$'s change
  as $k$ increases?}
  Let $D_1 = A_1,\, D_2 = A_2 \setminus A_1,\, \ldots D_n = A_n \setminus A_{n-1}$.
  Then, notice that
  \begin{align*}
    E \cap U &= \bigcup_{n} D_n = A_1 \cup D_2 \cup D_3 \cup \hdots \\
          &= A_2 \cup D_3 \cup D_4 \cup \hdots \\
          &= A_n \cup D_{n+1} \cup D_{n+2} \cup \hdots,
  \end{align*}
  since $\{ A_n \}$ is an increasing sequence of sets.
  Now for $x \in D_n$, we have that $x \in A_n$ but $x \notin A_{n-1}$.
  \sidenote{We see that the $D_n$'s form some kind of a ring-like
  partitioning of $E \cup U$.}
  In particular, we have
  \begin{equation*}
    \frac{1}{n} \leq d(x, E \cap U^C) < \frac{1}{n-1}.
  \end{equation*}

  \sidenote{Let's look at putting every odd $D_n$'s together,
  and see how far apart are they.
  Directly looking at $D_n$'s altogether is difficult because
  then their boundaries get muddled together.}
  Let $m \geq n + 2$. Consider $y \in D_m,\, x \in D_n$ and $z \in E \cap U^C$.
  Then we know by the triangle inequality that
  \begin{equation*}
    \frac{1}{n} \leq d(x, z) \leq d(x, y) + d(y, z).
  \end{equation*}
  We may then pick $z_0 \in E \cap U^C$ such that
  \begin{equation*}
    d(y, z_0) < \frac{1}{m-1}.
  \end{equation*}
  Then
  \begin{equation*}
    \frac{1}{n} \leq d(x, z_0) < d(x, y) + \frac{1}{m-1},
  \end{equation*}
  and so
  \begin{equation*}
    \frac{1}{n} - \frac{1}{m-1} < d(x, y).
  \end{equation*}
  Notice that
  \begin{equation*}
    \frac{1}{n} - \frac{1}{m-1}
        \geq \frac{1}{n} - \frac{1}{n + 2 - 1}
        = \frac{1}{n} - \frac{1}{n-1}.
  \end{equation*}
  Therefore, $\forall x \in D_n$ and $y \in D_m$, we have
  \begin{equation*}
    \frac{1}{n} - \frac{1}{n-1} < d(x, y).
  \end{equation*}
  In other words,
  \begin{equation*}
    d(D_n, D_m) > 0
  \end{equation*}
  as long as $m \geq n + 2$.

  Since $\mu^*$ is a \nameref{defn:metric_outer_measure}, it follows that
  \begin{equation*}
    \mu^* \left( \bigcup_{n \text{ odd }} D_n \right)
    = \sum_{n \text{ odd }} \mu^*(D_n).
  \end{equation*}
  Since $D_1 \cup D_3 \cup \hdots \subseteq E \cap U$,
  by subadditivity,
  \begin{equation*}
    \mu^*(D_1 \cup D_3 \cup \hdots) \leq \mu^*(E \cap U) < \infty.
  \end{equation*}
  In particular,
  \begin{equation*}
    \sum_{n \text{ odd }} \mu^*(D_n) < \infty.
  \end{equation*}
  Similarly, we can show that
  \begin{equation*}
    \mu^* \left( \bigcup_{n \text{ even }} D_n \right)
    = \sum_{n \text{ even }} \mu^*(D_n) < \infty.
  \end{equation*}
  Putting the two together, we have
  \begin{equation*}
    \mu^* \left( \bigcup_{n} D_n \right) = \sum_{n} \mu^*(D_n) < \infty.
  \end{equation*}

  Finally, since $E \cap U = A_n \cup D_{n+1} \cup D_{n+2} \cup \hdots$,
  by subadditivity,
  \begin{equation*}
    \mu^*(E \cap U) \leq \mu^*(A_n) + \mu^* \left( \bigcup_{m > n} D_m \right)
               = \mu^*(A_n) + \sum_{m = n + 1}^{\infty} \mu^*(D_m).
  \end{equation*}
  Since $\sum_{n} \mu^*(D_n) < \infty$, the tail
  \begin{equation*}
    \sum_{m = n + 1}^{\infty} \mu^*(D_m) \to 0
  \end{equation*}
  as $n \to \infty$.
  Therefore,
  \begin{align*}
    \mu^*(E \cap U)
    &\leq \lim_{n \to \infty} \mu^*(A_n)
      + \lim_{n \to \infty} \sum_{m = n + 1}^{\infty} \mu^*(D_m) \\
    &= \lim_{n \to \infty} \mu^*(A_n),
  \end{align*}
  as required.
\end{proof}

\begin{propo}[Lebesgue-Stieltjes Outer Measure on Half-open Intervals]\label{propo:lebesgue_stieltjes_outer_measure_on_half_open_intervals}
  Let $\mu_F^*$ be the \nameref{defn:lebesgue_stieltjes_outer_measure}.
  Then for $a < b \in \mathbb{R}$, we have
  \begin{equation*}
    \mu_F^*((a, b]) = F(b) - F(a).
  \end{equation*}
\end{propo}

\begin{proof}
  First, notice that $(a, b] \subseteq (a, b]$, and so
  \begin{equation*}
    \mu_F^*((a, b]) \leq F(b) - F(a)
  \end{equation*}
  by definition.

  Let $\epsilon > 0$. Pick a covering $(a, b] \subseteq \bigcup_{n} (a_n, b_n]$
  such that
  \begin{equation*}
    \sum_{n} ( F(b_n) - F(a_n) ) \leq \mu_F^*((a, b]) + \epsilon.
  \end{equation*}
  By right-continuity of $F$, we may pick $b_n' > b_n$ such that
  \begin{equation*}
    F(b_n') < F(b_n) + \frac{\epsilon}{2^n}.
  \end{equation*}
  Notice that
  \begin{align*}
    \sum_{n} F(b_n') - F(a_n)
    &\leq \sum_{n} ( F(b_n) + \frac{\epsilon}{2^n} - F(a_n) ) \\
    &= \epsilon + \sum_{n} ( F(b_n) - F(a_n) ) \\
    &\leq \mu_F^*((a, b]) + 2 \epsilon.
  \end{align*}

  Similarly, we can pick $a' > a$ such that $F(a') < F(a) + \epsilon$.
  Then
  \begin{equation*}
    [a, b] \subseteq (a, b] \subseteq \bigcup_{n} (a_n, b_n] \subseteq
    \bigcup_{n} (a_n, b_n').
  \end{equation*}
  By \hlnotea{compactness}, there exists a finite subcover, i.e.
  $\exists N \in \mathbb{N}$ such that
  \begin{equation*}
    [a', b] \subseteq \bigcup_{k=1}^{N} (a_{n_k}, b_{n_k}').
  \end{equation*}
  
  \hlwarn{The proof shall be completed in the next lecture}.

\end{proof}

% section the_lebesgue_stieltjes_outer_measure_continued (end)

% chapter lecture_7_sep_18th_2019 (end)

\chapter{Lecture 8 Sep 20th 2019}%
\label{chp:lecture_8_sep_20th_2019}
% chapter lecture_8_sep_20th_2019

\section{The Lebesgue-Stieltjes Outer Measure (Continued 2)}%
\label{sec:the_lebesgue_stieltjes_outer_measure_continued_2}
% section the_lebesgue_stieltjes_outer_measure_continued_2

\begin{proof}[\nameref{propo:lebesgue_stieltjes_outer_measure_on_half_open_intervals} continued]
  Continuing from before, let us first reorder the finite number of intervals
  such that $b_{n_1}' \geq b_{n_2}' \geq \hdots$.

  \cref{fig:an_arbitrary_representation_of_the_finite_cover_}
  illustrates what sets do we throw away (labelled \textcolor{red}{T}),
  what we shall keep (labelled \textcolor{blue}{K}),
  and what is impossible (labelled \textcolor{green}{I}).

  \begin{figure*}[ht]
    \centering
    \begin{tikzpicture}
      \draw (-7, 0) -- (8, 0);
      \node[label={270:{$a'$}}] at (-4, 0) {|};
      \node[label={270:{$b$}}] at (4, 0) {|};
      \draw[
        {Arc Barb[length=5pt,width=15pt]}-{Arc Barb[length=5pt,width=15pt]},
        blue]
        (2, 0) node[below=10pt] {$a_{n_k}$} --
        (5, 0) node[below=10pt] {$b_{n_k}'$}
        node[midway,above=10pt] {K};
      \draw[
        {Arc Barb[length=5pt,width=15pt]}-{Arc Barb[length=5pt,width=15pt]},
        red]
        (6, 0) node[below=10pt] {$a_{n_{k-1}}$} --
        (7, 0) node[below=10pt] {$b_{n_{k-1}}'$}
        node[midway,above=10pt] {T};
      \node[pin={[pin edge=latex'-,pin distance=20pt]
        90:{removed since it does not intersect $[a', b]$}}] at (6.5, 1) {};
      \draw[
        {Arc Barb[length=5pt,width=15pt]}-{Arc Barb[length=5pt,width=15pt]},
        green]
        (-2, 0) node[below=10pt] {$a_{n_{k+1}}$} --
        (-1, 0) node[below=10pt] {$b_{n_{k+1}}'$}
        node[midway,above=10pt] {I};
      \node[pin={[pin edge=latex'-,pin distance=5pt]
        90:{impossible since there are no $b_{n_i}$ between $b_{n_{k+1}}$
        and $b_{n_k}$}}] at (-1.5, 1) {};
      \draw[
        {Arc Barb[length=5pt,width=15pt]}-{Arc Barb[length=5pt,width=15pt]},
        blue]
        (1, 0) node[below=10pt] {$a_{n_{k+1}}$} --
        (3.5, 0) node[below=10pt] {$b_{n_{k+1}}'$}
        node[midway,above=10pt] {K};
      \draw[
        {Arc Barb[length=5pt,width=15pt]}-{Arc Barb[length=5pt,width=15pt]},
        blue]
        (-5, 0) node[below=10pt] {$a_{n_N}$} --
        (-3, 0) node[below=10pt] {$b_{n_N}'$}
        node[midway,above=10pt] {K};
      \node[pin={[pin edge=latex'-,pin distance=10pt]
        270:{$a_N < a'$ for a similar reason $b_{n_1}' > b$}}] at (-5, -1) {};
    \end{tikzpicture}
    \caption{An arbitrary representation of the finite cover.}
    \label{fig:an_arbitrary_representation_of_the_finite_cover_}
  \end{figure*}

  Most importantly, we observe that
  \begin{equation*}
    a_{n_{k-1}} < b_{n_k}'.
  \end{equation*}
  Therefore,
  \begin{align*}
    \sum_{k=1}^{\infty} F(b_{n_k}') - F(a_{n_k})
    &\geq \sum_{k=1}^{N} F(b_{n_k}') - F(a_{n_k}) \\
    &= F(b_1') \overbrace{- F(a_1) + F(b_2')}^{> 0}
      \overbrace{- F(a_2) + F(b_3')}^{> 0} \\
    &\quad + \overbrace{\hdots + F(b_N')}^{> 0} - F(a_N) \\
    &\geq F(b_1') - F(a_N) \geq F(b) - F(a').
  \end{align*}
  It follows that
  \begin{equation*}
    \mu_F^*((a, b]) + 2 \epsilon \geq F(b) - F(a') \geq F(b) - (F(a) + \epsilon),
  \end{equation*}
  and so
  \begin{equation*}
    F(b) - F(a) \leq \mu_F^*((a, b]) + 3\epsilon.
  \end{equation*}
  Since $\epsilon > 0$ is arbitrary, our proof is complete.
\end{proof}

\begin{remark}
  \cref{propo:lebesgue_stieltjes_outer_measure_on_half_open_intervals}
  means that the Lebesgue-Stieltjes outer measure falls back nicely
  onto our usual notion of length when it comes to intervals.
\end{remark}

\begin{propo}[The Lebesgue-Stieltjes Outer Measure is a Metric Outer Measure]\label{propo:the_lebesgue_stieltjes_outer_measure_is_a_metric_outer_measure}
  $\mu_F^*$ is a \nameref{defn:metric_outer_measure}.
\end{propo}

\begin{proof}
  Let $\delta > 0$. For each interval $(a, b] \subseteq \mathbb{R}$
  such that $b - a > \delta$, we may break it up so that
  \begin{equation*}
    (a, b] = (x_1, x_2] \cup (x_2, x_3] \cup \hdots \cup (x_{N-1}, x_N],
  \end{equation*}
  where $x_i - x_{i-1} < \delta$, and $x_1 = a$, $x_N = b$.
  Notice that
  \begin{equation*}
    F(b) - F(a) = F(x_N) - F(x_{N-1}) + F(x_{N-1}) - \hdots + F_{x_2} - F(x_1).
  \end{equation*}
  Therefore, given $\delta > 0$, by the definition of $\mu_F^*$,
  we have that $\forall E \subseteq \mathbb{R}$,
  \begin{equation*}
    \mu_F^*(E) = \inf \left\{ 
      \sum_{i=1}^{\infty} F(b_i) - F(a_i)
      : E \subseteq \bigcup_{i=1}^{\infty} (a_i, b_i],\,
        b_i - a_i < \delta
    \right\}.
  \end{equation*}

  Now let $A, B \subseteq \mathbb{R}$ such that $d(A, B) > 2\delta > 0$.
  Given any $\epsilon > 0$, we can pick a cover $A \cup B \subseteq \bigcup_{i}
  (a_i, b_i]$ with $b_i - a_i < \delta$ such that
  \begin{equation*}
    \sum_{i} F(b_i) - F(a_I) \leq \mu_F^*(A \cup B) + \epsilon.
  \end{equation*}
  Since $d(A, B) > 2\delta$ and $b_i - a_i < \delta$ for each $i$,
  the following are the only possible scenarios:
  for each $i$,
  \begin{itemize}
    \item $A \cap (a_i, b_i] = \emptyset$ and $B \cap (a_i, b_i] = \emptyset$,
      in which case we choose an even finer covering of $A \cup B$
      to remove $(a_i, b_i]$;
    \item $A \cap (a_i, b_i] \neq \emptyset$
      and $B \cap (a_i, b_i] = \emptyset$; and
    \item $A \cap (a_i, b_i] = \emptyset$ and
      $B \cap (a_i, b_i] \neq \emptyset$.
  \end{itemize}
  We may thus consider the following subsets of indices:
  \begin{gather*}
    \{ i_k \}_{k \in \mathbb{N}}
    = \{ i_k : A \cap (a_{i_k}, b_{i_k}] \neq \emptyset,\,
        B \cap (a_{i_k}, b_{i_k}] = \emptyset \}
      \subseteq \{ i \}_{i \in \mathbb{N}} \\
    \{ j_l \}_{l \in \mathbb{N}}
    = \{ j_l : A \cap (a_{j_l}, b_{j_l}] = \emptyset,\,
        B \cap (a_{j_l}, b_{j_l}] \neq \emptyset \}
      \subseteq \{ i \}_{i \in \mathbb{N}}.
  \end{gather*}
  In particular, we have
  \begin{equation*}
    A \subseteq \bigcup_{k=1}^{\infty} (a_{i_k}, b_{i_k}] \text{ and }
    B \subseteq \bigcup_{l=1}^{\infty} (a_{j_l}, b_{j_l}].
  \end{equation*}
  Then by \cref{propo:lebesgue_stieltjes_outer_measure_on_half_open_intervals},
  \begin{gather*}
    \mu_F^*(A) \leq \sum_{k=1}^{\infty} F(b_{i_k}) - F(a_{i_k}) \\
    \mu_F^*(B) \leq \sum_{l=1}^{\infty} F(b_{j_l}) - F(a_{j_l}).
  \end{gather*}
  It follows that
  \begin{align*}
    \mu_F^*(A) + \mu_F^*(B)
    &\leq \sum_{k=1}^{\infty} F(b_{i_k}) - F(a_{i_k})
    + \sum_{l=1}^{\infty} F(b_{j_l}) - F(a_{j_l}) \\
    &= \sum_{i=1}^{\infty} F(b_i) - F(a_i)
    \leq \mu_F^*(A \cup B) + \epsilon.
  \end{align*}
  Since $\epsilon$ was arbitrary, we have
  \begin{equation*}
    \mu_F^*(A) + \mu_F^*(B) \leq \mu_F^*(A \cup B)
  \end{equation*}
  as required.
\end{proof}

\begin{thm}[Lebesgue-Stieltjes Theorem by Carathéodory]\index{Lebesgue-Stieltjes Theorem by Carathéodory}\label{thm:lebesgue_stieltjes_theorem_by_caratheodory}
  Let $F : \mathbb{R} \to \mathbb{R}$ be an increasing function
  that is right continuous.
  Let $\mu_F^*$ be the corresponding outer measure.
  Then the collection $\mathfrak{M}_F$
  of $\mu_F^*$-measurable sets contains $\mathfrak{B}(\mathbb{R})$
  and $\mu_F : \mathfrak{M}_F \to [0, \infty]$
  is a \nameref{defn:complete_measure_space} with
  \begin{equation*}
    \mu_F((a, b]) = F(b) - F(a).
  \end{equation*}
\end{thm}

\begin{proof}
  This is a direct result of
  \nameref{thm:caratheodory_s_second_theorem},
  \cref{propo:lebesgue_stieltjes_outer_measure_on_half_open_intervals},
  and
  \cref{propo:the_lebesgue_stieltjes_outer_measure_is_a_metric_outer_measure}.
\end{proof}

\begin{eg}
  When $F(x) = x$, $\mu_F$ is simply Lebesgue's measure.
\end{eg}

\begin{eg}[Dirac delta measure of a point]\label{eg:dirac_delta_measure_of_a_point}
  Fix $x_0 \in \mathbb{R}$. Let
  \begin{equation*}
    F(x) = \begin{cases}
      0 & x < x_0 \\
      1 & x \geq x_0
    \end{cases}.
  \end{equation*}
  Notice that
  \begin{equation*}
    \forall b > x_0 \quad
    \mu_F((x_0, b]) = F(b) - F(x_0) = 1 - 1 = 0,
  \end{equation*}
  which then
  \begin{equation*}
    \mu_F((x_0, \infty]) = 0.
  \end{equation*}
  Also
  \begin{equation*}
    \forall a < x_0 \quad
    \mu_F \left( \left( a, x_0 - \frac{1}{n} \right] \right)
    = F \left(x_0 - \frac{1}{n} \right) - F(a) = 0 - 0 = 0,
  \end{equation*}
  which then since
  \begin{equation*}
    (a, x_0) = \bigcup_{n=1}^{\infty} \left( a, x_0 - \frac{1}{n} \right],
  \end{equation*}
  we have
  \begin{equation*}
    \mu_F((a, x_0)) = 0,
  \end{equation*}
  which since this holds for all $a < x_0$,
  \begin{equation*}
    \mu_F((-\infty, x_0)) = 0.
  \end{equation*}

  However, for $a < x_0$,
  \begin{equation*}
    \mu_F((a, x_0]) = F(x_0) - F(a) = 1 - 0 = 1.
  \end{equation*}
  Furthermore, since
  \begin{equation*}
    \{ x_0 \} = \bigcap_{n=1}^{\infty} \left( x_0 - \frac{1}{n}, x_0 \right],
  \end{equation*}
  by \hyperref[thm:properties_of_a_measure]{continuity from above},
  \begin{equation*}
    \mu_F(\{ x_0 \})
    = \lim_{n \to \infty} \mu_F \left( x_0 - \frac{1}{n}, x_0 \right] = 1.
  \end{equation*}
\end{eg}

With the above example in mind, recall the
\href{https://tex.japorized.ink/PMATH450/classnotes.pdf\#chapter.5}{Cantor set}
\begin{equation*}
  C = \bigcap_{n=1}^{\infty} C_n,
\end{equation*}
where $C_n = C_{n-1} \setminus P_n$,
where $P$ is the middle 1/3 of each of the remaining intervals,
with $C_0 = [0, 1]$.

We have that the Lebesgue measure of each $C_n$ is
\begin{align*}
  \mu(C_1) &= \frac{1}{3} \\
  \mu(C_2) &= \mu(C_1) - \frac{2}{9} = 1 - \frac{1}{3} - \frac{2}{9} \\
  \mu(C_3) &= \frac{1}{3} - \frac{2}{9} - \frac{4}{27} \\
        &\vdots \\
  \mu(C_n) &= 1 - \frac{1}{3} - \frac{2}{9} - \hdots - \frac{2^{n-1}}{3^n}.
\end{align*}
Then
\begin{equation*}
  \mu(C) = 1 - \sum_{n=1}^{\infty} \frac{2^{n-1}}{3^n} 
  = 1 - \frac{1}{3} \sum_{n=1}^{\infty} \left( \frac{2}{3} \right)^{n-1}
  = 1 - \frac{1}{3} \cdot \frac{1}{1 - \frac{2}{3}} = 0.
\end{equation*}

\paragraph{Cantor Function}\index{Cantor Function}\label{para:cantor_function}

With the Cantor set,
we may construct the famous/infamous \hlnoteb{Cantor function}.
The Cantor function, which we shall label $F$, is defined such that
$F$ is
\begin{itemize}
  \item $\frac{1}{2}$ on $\left( \frac{1}{3}, \frac{2}{3} \right)$,
  \item $\frac{1}{4}$ on $\left( \frac{1}{9}, \frac{2}{9} \right)$,
  \item $\frac{3}{4}$ on $\left( \frac{7}{9}, \frac{8}{9} \right)$,
\end{itemize}
and so on, on each of the removed intervals.
We also let $F(0) = 0$ and $F(1) = 1$.
Then $F$ is increasing and continuous.
Furthermore, $F' = 0$ on all the removed intervals.

% section the_lebesgue_stieltjes_outer_measure_continued_2 (end)

% chapter lecture_8_sep_20th_2019 (end)

\chapter{Lecture 9 Sep 23rd 2019}%
\label{chp:lecture_9_sep_23rd_2019}
% chapter lecture_9_sep_23rd_2019

\section{The Lebesgue-Stieltjes Outer Measure (Continued 3)}%
\label{sec:the_lebesgue_stieltjes_outer_measure_continued_3}
% section the_lebesgue_stieltjes_outer_measure_continued_3

Continuing with the Cantor set, we notice that $F'(x) = 0$ for all $x \notin C$.
In particular, the derivative of $F$ exists almost everywhere.

Now for intervals that we have ``thrown away'', by
\cref{eg:dirac_delta_measure_of_a_point}, the measure of each
of these intervals is $0$.
However,
\begin{equation*}
  \mu_F [0, 1] = F(1) - F(0) = 1.
\end{equation*}
Since $[0, 1] = C \cupdot C^C$, we have that
\begin{equation*}
  1 = \mu_F [0, 1] = \mu_F(C) + \mu_F(C^C) = \mu_F(C) + 0,
\end{equation*}
and so
\begin{equation*}
  \mu_F(C) = 1.
\end{equation*}

\begin{remark}
  On $\mathbb{R}^k$, we can define a $k$-dimensional Lebesgue outer measure
  $\mu_F^*$ by covering sets with ``boxes'' such as
  \begin{equation*}
    R_k = (a_1, b_1) \times \hdots \times (a_k, b_k),
  \end{equation*}
  where
  \begin{equation*}
    \Vol(R_k) = (b_1 - a_1) \hdots (b_k - a_k).
  \end{equation*}
  Thus
  \begin{equation*}
    \mu_k^*(E) \coloneqq \inf \left\{ 
      \sum \Vol(R_k)
        : E \subseteq \bigcup_{k} R_k
    \right\}.
  \end{equation*}

  \begin{ex}
    Show that $\mu_k^*(E)$ for each $k \geq 2$ is a metric outer measure.
  \end{ex}

  Applying Carathéodory's theorems, we get the $k$-dimensional measure,
  and we know that $\mathfrak{B}(\mathbb{R}^k)$ are all measurable.
\end{remark}

\begin{thm}[A Measure Constructed By Another Measure]\label{thm:a_measure_constructed_by_another_measure}
  Let $\mu : \mathfrak{B}(\mathbb{R}) \to [0, \infty]$ be a measure with
  \begin{equation*}
    \forall a, b \in \mathbb{R} \quad \mu((a, b]) < \infty.
  \end{equation*}
  Define
  \begin{equation*}
    F(x) \coloneqq \begin{cases}
      \mu((0, x])  & x > 0 \\
      0            & x = 0 \\
      -\mu((x, 0]) & x < 0
    \end{cases}.
  \end{equation*}
  Then $F$ is increasing and right-continuous.
  Furthermore, $\mu(A) = \mu_F(A)$ for all $A \in \mathfrak{B}(\mathbb{R})$.
\end{thm}

\begin{proof}
  \hlbnoted{$F$ is increasing} \\
  \noindent \hlbnotec{$0 \leq x < y$} \\
  Notice that $(0, x] \subseteq (0, y]$. Thus by subadditivity,
  \begin{equation*}
    F(x) = \mu(0, x] \leq \mu(0, y] = F(y).
  \end{equation*}

  \noindent \hlbnotec{$x < y \leq 0$} \\
  Observe that
  \begin{equation*}
    (x, 0] \supseteq (y, 0],
  \end{equation*}
  and so subadditivity dictates that
  \begin{equation*}
    \mu(x, 0] \geq \mu(y, 0].
  \end{equation*}
  Thus
  \begin{equation*}
    F(x) = - \mu(x, 0] \leq - \mu(y, 0] = F(y).
  \end{equation*}

  \noindent
  \hlbnoted{$F$ is right-continuous} \\
  \noindent \hlbnotec{$0 \leq x$} \\
  Consider a sequence $x_n \searrow x$.
  \sidenote{We write $x_n \searrow x$ to mean that $\{ x_n \}_n$
  is a sequence such that $x < x_n$
  and $\lim_{n \to \infty} x_n = x$.}
  Then notice that
  \begin{equation*}
    (0, x] = \bigcap_{n=1}^{\infty} (0, x_n],
  \end{equation*}
  and
  \begin{equation*}
    (0, x_n] \supseteq (0, x_{n+1}],
  \end{equation*}
  i.e. $\{ (0, x_n] \}_n$ is a decreasing sequence of sets.
  Furthermore, we note that
  \begin{equation*}
    \mu(0, x_n] < \infty
  \end{equation*}
  by assumption.
  Thus, by \hyperref[thm:properties_of_a_measure]{continuity from above},
  \begin{equation*}
    F(x) = \mu(0, x] = \lim_{n \to \infty} \mu(0, x_n]
         = \lim_{n \to \infty} F(x_n).
  \end{equation*}

  \noindent \hlbnotec{$x < 0$} \\
  Consider a sequence $x_n \searrow x$.
  Then, notice that
  \begin{equation*}
    (x, 0] = \bigcup_{n} (x_n, 0],
  \end{equation*}
  and
  \begin{equation*}
    (x_n, 0] \subseteq (x_{n+1}, 0],
  \end{equation*}
  I.e. $\{ (x_n, 0] \}_n$ is an increasing sequence of sets.
  By \hyperref[thm:properties_of_a_measure]{continuity from below},
  \begin{equation*}
    F(x) = - \mu(x, 0]
         = \lim_{n \to \infty} - \mu(x_n, 0]
         = \lim_{n \to \infty} F(x_n).
  \end{equation*}

  \noindent
  \hlbnoted{$\forall A \in \mathfrak{B}(\mathbb{R}) \quad \mu(A) = \mu_F(A)$}
  Consider the set
  \begin{equation*}
    \mathcal{A} \coloneqq \{ A \in \mathfrak{B}(\mathbb{R})
          : \mu(A) = \mu_F(A) \} \subseteq \mathfrak{B}(\mathbb{R}).
  \end{equation*}
  Now if $\mathcal{A}$ is a $\sigma$-algebra and contains intervals,
  then $\mathfrak{B}(\mathbb{R}) \subseteq \mathcal{A}$,
  which means $\mathfrak{B}(\mathbb{R}) = \mathcal{A}$,
  which is equivalent to what we want.

  \noindent
  \hlbnotec{$\mathcal{A}$ contains intervals}
  \begin{itemize}
    \item Let $0 \leq a < b \in \mathbb{R}$. Notice that
      \begin{equation*}
        \mu(0, a] + \mu(a, b] = \mu(0, b],
      \end{equation*}
      since
      \begin{equation*}
        (0, a] \cupdot (a, b] = (0, b].
      \end{equation*}
      Since $F(a) = \mu(0, a]$ and $F(b) = \mu(0, b]$,
      it follows that
      \begin{equation*}
        F(a) + \mu(a, b] = F(b),
      \end{equation*}
      and so by
      \cref{propo:lebesgue_stieltjes_outer_measure_on_half_open_intervals},
      \begin{equation*}
        \mu(a, b] = F(b) - F(a) = \mu_F(a, b].
      \end{equation*}

    \item Let $a < 0 \leq b \in \mathbb{R}$. Notice that
      \begin{equation*}
        (a, b] = (a, 0] \cupdot (0, b],
      \end{equation*}
      and so by
      \cref{propo:lebesgue_stieltjes_outer_measure_on_half_open_intervals},
      \begin{equation*}
        \mu(a, b] = \mu(a, 0] + \mu(0, b] = - F(a) + F(b) = \mu_F(a, b].
      \end{equation*}

    \item Let $a < b \leq 0 \in \mathbb{R}$. Notice that
      \begin{equation*}
        (a, 0] = (a, b] \cupdot (b, 0],
      \end{equation*}
      and so
      \begin{equation*}
        \mu(a, 0] = \mu(a, b] + \mu(b, 0].
      \end{equation*}
      By \cref{propo:lebesgue_stieltjes_outer_measure_on_half_open_intervals},
      \begin{equation*}
        \mu(a, b] = \mu(a, 0] - \mu(b, 0] = - F(a) + F(b) = \mu_F(a, b].
      \end{equation*}
  \end{itemize}

  \noindent
  \hlbnotec{$\mathcal{A}$ is a $\sigma$-algebra}
  \begin{itemize}
    \item It is clear that
      \begin{equation*}
        \mu(\emptyset) = 0 = \mu_F(\emptyset),
      \end{equation*}
      and so $\emptyset \in \mathcal{A}$.
    \item Let $\{ A_n \}_n \subseteq \mathcal{A}$ be a disjoint collection.
      Then it is clear that
      \begin{equation*}
        \mu \left( \bigcup_{n} A_n \right)
        = \sum_{n} \mu(A_n) = \sum_{n} \mu_F(A_n)
        = \mu_F \left( \bigcup_{n} A_n \right).
      \end{equation*}

    \item Let $A \in \mathcal{A}$. Consider an interval
      $(a, b] \subseteq \mathcal{A}$.
      Note that
      \begin{equation*}
        (a, b] = ( (a, b] \cap A ) \cupdot ( (a, b] \cap A^C ).
      \end{equation*}
      So
      \begin{equation}\label{eq:measure_from_measure_eq1}
        \mu(a, b] = \mu( (a, b] \cap A ) + \mu( (a, b] \cap A^C ).
      \end{equation}
      Consider an arbitrary covering
      \begin{equation*}
        (a, b] \cap A \subseteq \bigcup_{i} (a_i, b_i].
      \end{equation*}
      Then
      \begin{equation*}
        \mu( (a, b] \cap A ) \leq \sum_{i} \mu(a_i, b_i]
                        = \sum_{i} F(b_i) - F(a_i).
      \end{equation*}
      Thus
      \begin{align*}
        \mu( (a, b] \cap A )
        &\leq \inf \left\{ \sum_{i} F(b_i) - F(a_i)
                  : (a, b] \cap A \subseteq \bigcup_{i} (a_i, b_i) \right\} \\
        &= \mu_F^*( (a, b] \cap A ) = \mu_F( (a, b] \cap A ).
      \end{align*}
      Similarly, we have
      \begin{equation*}
        \mu( (a, b) \cap A^C ) \leq \mu_F( (a, b] \cap A^C ).
      \end{equation*}
      Therefore, going back to \cref{eq:measure_from_measure_eq1},
      \begin{align*}
        \mu(a, b] &\leq \mu_F( (a, b] \cap A ) + \mu_F( (a, b] \cap A^C ) \\
                  &= \mu_F(a, b] = \mu(a, b].
      \end{align*}
      It follows that we must have
      \begin{equation*}
        \mu( (a, b] \cap A ) = \mu_F( (a, b] \cap A ),
      \end{equation*}
      and
      \begin{equation*}
        \mu( (a, b] \cap A^C ) = \mu_F( (a, b] \cap A^C ).
      \end{equation*}
      In particular, $(a, b] \cap A^C \in \mathcal{A}$.
      Notice that
      \begin{equation*}
        A^C = \bigcupdot_{n = -\infty}^{\infty} (n, n + 1] \cap A^C,
      \end{equation*}
      and so since we've showed that $\mathcal{A}$ is closed under
      countable unions, $A^C \in \mathcal{A}$.
  \end{itemize}

  This concludes the proof.
\end{proof}

% section the_lebesgue_stieltjes_outer_measure_continued_3 (end)

\section{Measurable Functions}%
\label{sec:measurable_functions}
% section measurable_functions

We look into so-called measurable functions that shall
be our next step towards the theory of integration.

\begin{defn}[Measurable Space]\index{Measurable Space}\label{defn:measurable_space}
  Let $X \neq \emptyset$ be a set and $\mathfrak{M}$ a $\sigma$-algebra
  of subsets of $X$.
  We call the pair $(X, \mathfrak{M})$ a \hldefn{measurable space}.
\end{defn}

\begin{defn}[Measurable Functions]\index{Measurable Functions}\label{defn:measurable_functions}
  Let $(X, \mathfrak{M})$ and $(Y, \mathfrak{N})$ be measurable spaces,
  and $f : X \to Y$ a function.
  We say that $f$ is
  a \hlnoteb{$(\mathfrak{M}, \mathfrak{N})$-measurable function},
  or that $f$ is \hlnoteb{$(\mathfrak{M}, \mathfrak{N})$-measurable}, if
  \begin{equation*}
    \forall E \in \mathfrak{N}\quad f^{-1}(E) \in \mathfrak{M}.
  \end{equation*}
\end{defn}

\begin{remark}
  For those who remember contents from real analysis,
  the definition of a measurable function is similar
  to the definition of a
  \href{https://tex.japorized.ink/PMATH351F18/classnotes.pdf\#thm.43}{continuous function on topological spaces}.
  We shall, in fact, see that their similarity goes beyond than
  their definitions.
\end{remark}

\begin{propo}[Composition of Measurable Functions]\label{propo:composition_of_measurable_functions}
  Let $(X, \mathfrak{M})$, $(Y, \mathfrak{N})$ and $(Z, \mathfrak{O})$ be
  measurable spaces.
  Suppose
  \begin{itemize}
    \item $f : X \to Y$ is $(\mathfrak{M}, \mathfrak{N})$-measurable; and
    \item $g : Y \to Z$ is $(\mathfrak{N}, \mathfrak{O})$-measurable.
  \end{itemize}
  Then $g \circ f : X \to Z$ is $(\mathfrak{M}, \mathfrak{O})$-measurable.
\end{propo}

\begin{proof}
  Let $E \in \mathfrak{O}$.
  Then since $g^{-1}(E) \in \mathfrak{N}$, it follows that
  \begin{equation*}
    (g \circ f)^{-1}(E) = f^{-1}(g^{-1}(E)) \in \mathfrak{M}.
  \end{equation*}
\end{proof}

\begin{propo}[Measurability of a Function Defined on Generators of the Codomain]\label{propo:measurability_of_a_function_defined_on_generators_of_the_codomain}
  Let $(X, \mathfrak{M})$ and $(Y, \mathfrak{N})$ be measurable spaces,
  and let $\mathcal{E}$ be the generator of $\mathfrak{N}$.
  Let $f : X \to Y$.
  If $f^{-1}(E) \in \mathfrak{M}$ for all $E \in \mathcal{E}$,
  then $f$ is $(\mathfrak{M}, \mathfrak{N})$-measurable.
\end{propo}

\begin{proof}
  Consider
  \begin{equation*}
    \mathcal{A} \coloneqq \{ A \in \mathfrak{N} : f^{-1}(A) \in \mathfrak{M} \}.
  \end{equation*}
  Notice that if $\mathcal{A}$ is a $\sigma$-algebra,
  then we must have $\mathcal{E} \subseteq \mathcal{A}$,
  which then forces $\mathcal{A} = \mathfrak{N}$.

  \noindent
  \hlbnoted{$\mathcal{A}$ is a $\sigma$-algebra}
  \begin{itemize}
    \item Since $\mathcal{E}$ is a $\sigma$-algebra, $\emptyset \in \mathcal{E}$,
      and so $f^{-1}(\emptyset) \in \mathfrak{M}$ by assumption.
      Thus $\emptyset \in \mathcal{A}$.
    \item Suppose $\{ A_n \}_n \subseteq \mathcal{A}$ a disjoint collection.
      Notice that since $f$ is a function, it must be that
      \sidenote{If this is not clear, notice that if some $f^{-1}(A_n)$ and
      $f^{-1}(A_m)$ are not disjoint, then that means $A_n$ and $A_m$ are not
      disjoint, or that $f$ is not a function.}
      \begin{equation*}
        f^{-1} \left( \bigcupdot_{n} A_n \right) = \bigcupdot_{n} f^{-1}(A_n).
      \end{equation*}
      Since $f^{-1}(A_n) \in \mathfrak{M}$ and $\mathfrak{M}$ is a
      $\sigma$-algebra, it follows that
      \begin{equation*}
        f^{-1} \left( \bigcupdot_{n} A_n \right) = \bigcupdot_{n} f^{-1}(A_n)
          \in \mathfrak{M}.
      \end{equation*}
      Thus $\bigcup_{n} A_n \in \mathcal{A}$.
    \item Suppose $A \in \mathcal{A}$.
      Notice that $f^{-1}(A) \in \mathfrak{M}$, and so
      $(f^{-1}(A))^C \in \mathfrak{M}$.
      We need to show that
      \begin{equation*}
        f^{-1}(A^C) = (f^{-1}(A))^C
      \end{equation*}
      But this follows for the same reason as the last point.
  \end{itemize}
  It follows that $\mathcal{A}$ is a $\sigma$-algebra.
\end{proof}

\begin{crly}[Continuous Functions on Borel Sets are Measurable]\label{crly:continuous_functions_on_borel_sets_are_measurable}
  Let $X$ and $Y$ be topological spaces,
  with $\mathfrak{B}(X)$ and $\mathfrak{B}(Y)$ as their corresponding Borel sets.
  Suppose $f : X \to Y$ is continuous.
  Then $f$ is $(\mathfrak{B}(X), \mathfrak{B}(Y))$-measurable.
\end{crly}

\begin{proof}
  Let $U \in \mathfrak{B}(Y)$, i.e. $U \subseteq Y$ is an open set.
  Since $f$ is continuous, $f^{-1}(U)$ is open in $X$,
  i.e. $f^{-1}(U) \in \mathfrak{B}(X)$.
  Thus $f$ is $(\mathfrak{B}(X), \mathfrak{B}(Y))$-measurable.
  Furthermore,
  \begin{equation*}
    \mathcal{E} \coloneqq \{ U \subseteq Y : U \text{ is open } \}
  \end{equation*}
  generates $\mathfrak{B}(Y)$.
\end{proof}

% section measurable_functions (end)

% chapter lecture_9_sep_23rd_2019 (end)

\chapter{Lecture 10 Sep 25th 2019}%
\label{chp:lecture_10_sep_25th_2019}
% chapter lecture_10_sep_25th_2019

\section{Measurable Functions (Continued)}%
\label{sec:measurable_functions_continued}
% section measurable_functions_continued

\begin{notation}
  Let $(X, \mathfrak{M})$ be a measurable space.
  The function $f : X \to \mathbb{R}$ is said to be $\mathfrak{M}$-measurable,
  or measurable, when it is
  $(\mathfrak{M}, \mathfrak{B}(\mathbb{R}))$-measurable.
\end{notation}

\begin{propo}[Characteristics of $\mathfrak{M}$-measurable Functions]\label{propo:characteristics_of_m_measurable_functions}
  Let $(X, \mathfrak{M})$ be a measurable space and $f : X \to \mathbb{R}$.
  TFAE:
  \begin{enumerate}
    \item $f$ is $\mathfrak{M}$-measurable.
    \item $\forall a \in \mathbb{R} \quad f^{-1}((a, \infty)) \in \mathfrak{M}$.
    \item $\forall a \in \mathbb{R} \quad f^{-1}([a, \infty)) \in \mathfrak{M}$.
    \item $\forall a \in \mathbb{R} \quad f^{-1}((-\infty, a)) \in \mathfrak{M}$.
    \item $\forall a \in \mathbb{R} \quad f^{-1}((-\infty, a]) \in \mathfrak{M}$.
  \end{enumerate}
\end{propo}

\begin{proof}
  We shall only look at $(1) \iff (2)$, since
  the proof for $(1) \iff (i)$ for $i = 3,4,5$ are similar.

  \noindent
  \hlbnoted{$(1) \implies (2)$}
  $\forall a \in \mathbb{R}$, since $(a, \infty) \in \mathfrak{B}(\mathbb{R})$,
  it follows by $\mathfrak{M}$-measurability of $f$ that
  \begin{equation*}
    f^{-1}(a, \infty) \in \mathfrak{M}.
  \end{equation*}

  \noindent
  \hlbnoted{$(2) \implies (1)$}
  We know that
  \begin{equation*}
    \mathcal{E} \coloneqq \{ (a, \infty) : a \in \mathbb{R} \}
  \end{equation*}
  generates $\mathfrak{B}(\mathbb{R})$.
  By assumption $\forall E \in \mathcal{E}$, $f^{-1}(E) \in \mathfrak{M}$.
  By
  \cref{propo:measurability_of_a_function_defined_on_generators_of_the_codomain},
  it follows that $f$ is indeed a $\mathfrak{M}$-measurability.
\end{proof}

\begin{remark}
  When $X = \mathbb{R}$,
  we say that $f : \mathbb{R} \to \mathbb{R}$ is measurable \\
  $\iff \forall B \in \mathfrak{B}(\mathbb{R})\quad
    f^{-1}(B) \in \mathfrak{B}(\mathbb{R})$ \\
  $\iff \forall a \in \mathbb{R}\quad f^{-1}(a, \infty) \in \mathfrak{B}(\mathbb{R})$.

  Let $\mathcal{L}$ be the $\sigma$-algebra of all Lebesgue measurable sets.
  $f : \mathbb{R} \to \mathbb{R}$ is said to be Lebesgue measurable when \\
  $\forall a \in \mathbb{R}\quad f^{-1}(a, \infty) \in \mathcal{L}$ \\
  $\iff \forall B \in \mathfrak{B}(\mathbb{R})\quad f^{-1}(B) \in \mathcal{L}$.
\end{remark}

\begin{warning}
  Notice that the last remark can be problematic.
  Compare what was written above with
  \cref{propo:composition_of_measurable_functions}.
  In particular,
  notice that for the definition of a Lebesgue measurable function,
  instead of requiring $f^{-1}(a, \infty) \in \mathfrak{B}(\mathbb{R})$,
  we simply required $f^{-1}(a, \infty) \in \mathcal{L}$.
  Thus, if we have another function $g : \mathbb{R} \to \mathbb{R}$,
  for $f \circ g$ to be Lebesgue measurable, we require
  \begin{equation*}
    (f \circ g)^{-1}(a, \infty) \in \mathcal{L}.
  \end{equation*}
  However, $f^{-1}(a, \infty) \in \mathcal{L}$,
  and it is not necessarily true that
  \begin{equation*}
    g^{-1}(f^{-1}(a, \infty)) \in \mathcal{L}.
  \end{equation*}
  There are various examples that show this,
  typically arising from the \hyperref[para:cantor_function]{Cantor Function}.
\end{warning}

\newthought{We go on} a little tangent about products of $\sigma$-algebras
to make our lives down the road a little easier.

\begin{defn}[Products of $\sigma$-algebras]\label{defn:products_of_sigma_algebras}
  Let $(Y_1, \mathfrak{N}_1)$ and $(Y_2, \mathfrak{N}_2)$ be measurable spaces.
  We define $\mathfrak{N}_1 \otimes \mathfrak{N}_2$ to be the $\sigma$-algebra
  on the Cartesian product $Y_1 \times Y_2$ as
  \begin{equation*}
    \mathfrak{N}_1 \otimes \mathfrak{N}_2 \coloneqq \{
      B_1 \times B_2 : B_1 \in \mathfrak{N}_1,\, B_2 \in \mathfrak{N}_2
    \}.
  \end{equation*}
\end{defn}

\begin{remark}
  We will unofficially call $\mathfrak{N}_1 \otimes \mathfrak{N}_2$
  the \hlnoteb{tensor product of $\mathfrak{N}_1$ and $\mathfrak{N}_2$}.
\end{remark}

\begin{propo}[Tensor Product of $\mathfrak{B}(\mathbb{R})$'s]\label{propo:tensor_product_of_mathfrak_b_mathbb_r_s}
  We have
  \begin{equation*}
    \mathfrak{B}(\mathbb{R}) \otimes \mathfrak{B}(\mathbb{R})
      = \mathfrak{B}(\mathbb{R}^2).
  \end{equation*}
\end{propo}

\begin{proof}
  \hlbnoted{$\mathfrak{B}(\mathbb{R}^2)
    \subseteq \mathfrak{B}(\mathbb{R}) \otimes \mathfrak{B}(\mathbb{R})$}
  Let $\mathcal{O} \subseteq \mathbb{R}^2$ be open.
  Then
  \begin{equation*}
    \mathcal{O} = \cup \{ (r_1, s_1) \times (r_2, s_2) \subseteq \mathcal{O}
          : r_1, r_2, s_1, s_2 \in \mathbb{Q} \},
  \end{equation*}
  which means $\mathcal{O}$ is a countable union of open sets.
  Since $(r_1, s_1), (r_2, s_2) \in \mathfrak{B}(\mathbb{R})$, it follows that
  \begin{equation*}
    (r_1, s_1) \times (r_2, s_2)
      \in \mathfrak{B}(\mathbb{R}) \otimes \mathfrak{B}(\mathbb{R}),
  \end{equation*}
  and so $\mathcal{O} \in \mathfrak{B}(\mathbb{R}) \otimes \mathfrak{B}(\mathbb{R})$
  since $\mathfrak{B}(\mathbb{R}) \otimes \mathfrak{B}(\mathbb{R})$ is a
  $\sigma$-algebra.

  \noindent
  \hlbnoted{$\mathfrak{B}(\mathbb{R}) \otimes \mathfrak{B}(\mathbb{R})
    \subseteq \mathfrak{B}(\mathbb{R}^2)$}
  WTS
  \begin{equation*}
    \forall B_1, B_2 \in \mathfrak{B}(\mathbb{R})\quad
      B_1 \times B_2 \in \mathfrak{B}(\mathbb{R}^2).
  \end{equation*}
  Let
  \begin{equation*}
    \mathcal{A} \coloneqq \{ E \subseteq \mathbb{R}
      : E \times \mathbb{R} \in \mathfrak{B}(\mathbb{R}^2) \}.
  \end{equation*}
  If $\mathcal{A}$ is a $\sigma$-algebra and $(a, b) \in \mathcal{A}$
  for any $a < b \in \mathbb{R}$,
  then $\mathfrak{B}(\mathbb{R}) \subseteq \mathcal{A}$ and we are done.

  \noindent
  \hlbnotec{$\mathcal{A}$ is a $\sigma$-algebra}
  \begin{itemize}
    \item $\emptyset \times \mathbb{R} = \mathbb{R} \in \mathfrak{B}(\mathbb{R})$
      and so $\emptyset \in \mathcal{A}$.
    \item Suppose $\{ E_n \}_n \subseteq \mathcal{A}$ is a disjoint collection
      of sets.
      Then $E_n \times \mathbb{R} \in \mathfrak{B}(\mathbb{R}^2)$ for each $n$.
      Since $\mathfrak{B}(\mathbb{R}^2)$ is a $\sigma$-algebra,
      it follows that
      \begin{equation*}
        \bigcupdot_{n} (E_n \times \mathbb{R}) \in \mathfrak{B}(\mathbb{R}^2).
      \end{equation*}
      Notice that
      \begin{equation*}
        \bigcupdot_{n} (E_n \times \mathbb{R})
        = \left( \bigcupdot_{n} E_n \right) \times \mathbb{R}.
      \end{equation*}
      Therefore $\bigcupdot_{n} E_n \in \mathcal{A}$.
    \item Let $E \in \mathcal{A}$. Then
      \begin{equation*}
        E^C \times \mathbb{R}
        = (E \times \mathbb{R})^C \in \mathfrak{B}(\mathbb{R}^2).
      \end{equation*}
      Thus $E^C \in \mathcal{A}$.
  \end{itemize}

  \noindent
  \hlbnotec{$\forall a, b \in \mathbb{R}\quad
    (a, b) \times \mathbb{R} \in \mathcal{A}$}
  This is indeed true since $(a, b) \times \mathbb{R}$ is open.

  Similarly, we can do the same for
  \begin{equation*}
    \tilde{\mathcal{A}} \coloneqq \{ F \subseteq \mathbb{R}
            : \mathbb{R} \times F \in \mathfrak{B}(\mathbb{R}^2) \},
  \end{equation*}
  and have $\mathfrak{B}(\mathbb{R}) \subseteq \tilde{\mathcal{A}}$.

  Let $B_1, B_2 \in \mathfrak{B}(\mathbb{R})$.
  So $B_1 \in \mathcal{A}$ and $B_2 \in \tilde{\mathcal{A}}$,
  and
  \begin{equation*}
    B_1 \times \mathbb{R} \in \mathfrak{B}(\mathbb{R}^2)
    \text{ and }
    \mathbb{R} \times B_2 \in \mathfrak{B}(\mathbb{R}^2).
  \end{equation*}
  Therefore
  \begin{equation*}
    B_1 \times B_2 = (B_1 \times \mathbb{R}) \cap (\mathbb{R} \times B_2)
      \in \mathfrak{B}(\mathbb{R}^2).
  \end{equation*}
\end{proof}

\begin{propo}[Component-wise Measurability of Functions]\label{propo:component_wise_measurability_of_functions}
  Let $(X, \mathfrak{M})$, $(Y_1, \mathfrak{N}_1)$
  and $(Y_2, \mathfrak{N}_2)$ be measurable functions.
  Let $f_1 : X \to Y_1$ and $f_2 : X \to Y_2$.
  Let $f : X \to (Y_1, Y_2)$ such that
  \begin{equation*}
    f(x) = (f_1(x), f_2(x)).
  \end{equation*}
  Then $f$ is $(\mathfrak{M}, (\mathfrak{N}_1, \mathfrak{N}_2))$-measurable
  $\iff f_1$ is $(\mathfrak{M}, \mathfrak{N}_1)$-measurable and
  $f_2$ is $(\mathfrak{M}, \mathfrak{N}_2)$-measurable.
\end{propo}

\begin{proof}
  \hlbnoted{$(\implies)$}
  Let $B_1 \in \mathfrak{N}_1$.  WTS $f_1^{-1}(B_1) \in \mathfrak{M}$.
  We know $B_1 \times Y_2 \in \mathfrak{N}_1 \otimes \mathfrak{N}_2$,
  and $f^{-1}(B_1 \times Y_2) \in \mathfrak{M}$
  since $f$ is $(\mathfrak{M}, (\mathfrak{N}_1, \mathfrak{N}_2))$-measurable.
  Then
  \begin{align*}
    x \in f^{-1}(B_1 \times Y_2)
    &\iff f(x) \in B_1 \times Y_2 \\
    &\iff (f_1(x), f_2(x)) \in B_1 \times Y_2 \\
    &\iff f_1(x) \in B_1 \\
    &\iff x \in f_1^{-1}(B_1).
  \end{align*}
  Thus $f_1^{-1}(B_1) = f^{-1}(B_1 \times Y_2) \in \mathfrak{M}$.
  Hence $f_1$ is $(\mathfrak{M}, \mathfrak{N}_1)$-measurable.
  
  The proof is similar for $f_2$ being
  $(\mathfrak{M}, \mathfrak{N}_2)$-measurable.

  \noindent
  \hlbnoted{$(\impliedby)$}
  \sidenote{Again, we use the trick of showing that a cleverly
  chosen set that has the property that we want is a $\sigma$-algebra.}
  Let
  \begin{equation*}
    \mathcal{A} \coloneqq \{ B \subseteq Y_1 \times Y_2
          : f^{-1}(B) \in \mathfrak{M} \}.
  \end{equation*}
  Notice that
  $f$ is $(\mathfrak{M}, (\mathfrak{N}_1, \mathfrak{N}_2))$-measurable
  iff $\mathfrak{N}_1 \otimes \mathfrak{N}_2 \subseteq \mathcal{A}$.

  \noindent
  \hlbnotec{$\mathcal{A}$ is a $\sigma$-algebra}
  \begin{itemize}
    \item Let $B \in \mathcal{A}$. Then $f^{-1}(B)^C \in \mathfrak{M}$.
      Thus
      \begin{align*}
        x \in f^{-1}(B)^C
        &\iff x \notin f^{-1}(B) \\
        &\iff f(x) \notin B \\
        &\iff f(x) \in B^C \\
        &\iff x \in f^{-1}(B^C).
      \end{align*}
      Thus $f^{-1}(B^C) = f^{-1}(B)^C \in \mathfrak{M}$.
    \item Suppose $\{ B_n \}_n \subseteq \mathcal{A}$.
      Consider $\{ C_n \}_n \subseteq \mathcal{A}$
      where $C_n = B_n \setminus \bigcup_{j=1}^{n-1} B_j$ and $C_1 = B_1$.
      Notice that $C_n \in \mathfrak{M}$ for each $n$.
      Also, $\{ C_n \}_n$ is pairwise disjoint.
      It follows that
      \begin{equation*}
        f^{-1} \left( \bigcup_{n} B_n \right)
        = f^{-1} \left( \bigcupdot_{n} C_n \right)
        = \bigcupdot_{n} f^{-1}(C_n) \in \mathfrak{M}.
      \end{equation*}
  \end{itemize}
  This completes the claim.

  \noindent
  \hlbnotec{$\mathfrak{N}_1 \otimes \mathfrak{N}_1 \subseteq \mathcal{A}$}
  WTS $\forall B_1 \in \mathfrak{N}_1 \enspace \forall B_2 \in \mathfrak{N}_2
  \enspace B_1 \times B_2 \in \mathcal{A}$.
  We know that this is true iff
  \begin{equation*}
    \forall B_1 \in \mathfrak{N}_1 \enspace\forall B_2 \in \mathfrak{N}_2
    \enspace f^{-1}(B_1 \times B_2) \in \mathfrak{M}.
  \end{equation*}
  Notice that
  \begin{align*}
    x \in f_1^{-1}(B_1) \land x \in f_2^{-1}(B_2)
    &\iff f_1(x) \in B_1 \land f_2(x) \in B_2 \\
    &\iff (f_1(x), f_2(x)) \in B_1 \times B_2 \\
    &\iff f(x) \in B_1 \times B_2 \\
    &\iff x \in f^{-1}(B_1 \times B_2).
  \end{align*}
  Thus $f^{-1}(B_1 \times B_2) = f_1^{-1}(B_1) \cap f_2^{-1}(B_2) \in
  \mathfrak{M}$.
\end{proof}

% section measurable_functions_continued (end)

% chapter lecture_10_sep_25th_2019 (end)

\appendix

\chapter{Deep Dives into Proofs}%
\label{chp:deep_dives_into_proofs}
% chapter deep_dives_into_proofs

\section{Proving that \texorpdfstring{$\mathfrak{M}$}{M} is closed under countable unions in Carath\'{e}odory's Theorem}\label{sec:proving_that_m_is_closed_under_countable_unions_in_caratheodory_s_theorem}

This section is created in reference to
the proof for \nameref{proof:caratheodory_s_theorem}.

We have
\begin{equation*}
  \mathfrak{M} = \{ A \subseteq X : A \text{ is } \mu^*\text{-measurable } \}
\end{equation*}
where $\mu^*$ is an outer measure.
We wanted to show that $\mathfrak{M}$ is a $\sigma$-algebra.
In particular, the hard problem was to show that
$\mathfrak{M}$ is closed under countable unions.

Consider $\{ A_n \}_{n} \subseteq \mathfrak{M}$.
Thinking from behind, WTS $\forall E \subseteq X$,
\begin{align*}
  \mu^*(E)
  &\geq \mu^* \left( E \cap \bigcup_{n} A_n \right)
    + \mu^* \left( E \cap \left( \bigcup_{n} A_n \right)^C \right) \\
  &= \mu^* \left( E \cap \bigcup_{n} A_n \right)
    + \mu^* \left( E \cap \left( \bigcap_{n} A_n^C \right) \right).
\end{align*}
For simplicity, write $B = \bigcup_{n} A_n$.
WTS
\begin{equation}\tag{$*$}\label{eq:appendix_1_eq_1}
  \mu^*(E) \geq \mu^*(E \cap B) + \mu^*(E \cap B^C).
\end{equation}

Also thinking from behind,
if $\mathfrak{M}$ is a $\sigma$-algebra, 
\sidenote{Useful links:
\nameref{defn:algebra_of_sets},
\nameref{defn:_sigma_algebra_of_sets}.}
then it must be an algebra (of sets).
We showed that $\mathfrak{M}$ is closed under complementation.

If $\mathfrak{M}$ is closed under finite unions,
\sidenote{Unproved point 1}
then for each $N \in \mathbb{N}$,
\begin{equation*}
  \mu^*(E) = \mu^* \left( E \cap \bigcup_{n=1}^{N} A_n \right)
    + \mu^* \left( E \cap \left( \bigcup_{n=1}^{N} A_n \right)^C \right).
\end{equation*}
Let $B_N \coloneqq \bigcup_{n=1}^{N} A_n \in \mathfrak{M}$. Then
\begin{equation}\tag{$\dagger$}\label{eq:appendix_1_eq_2}
  \mu^*(E) = \mu^* (E \cap B_N) + \mu^* (E \cap B_N^C)
\end{equation}
for each $N \in \mathbb{N}$.

Notice that
\begin{equation*}
  B_N = \bigcup_{n=1}^{N} A_n \subseteq \bigcup_{n=1}^{\infty} A_n = B.
\end{equation*}
Consequently,
\begin{equation*}
  \implies B^C \supseteq B_N^C \implies \mu^*(B^C) \leq \mu^*(B_N^C)
\end{equation*}
by the \hyperref[defn:outer_measure]{monotonicity} of the outer measure.

As a result, looking at \cref{eq:appendix_1_eq_1} and \cref{eq:appendix_1_eq_2},
we see that
\begin{align*}
  \mu^*(E) &= \mu^*(E \cap B_N) + \mu^*(E \cap B_N^C) \\
           &\geq \mu^*(E \cap B_N) + \mu^*(E \cap B^C)
\end{align*}
for each $N \in \mathbb{N}$.

We are in quite the predicament at this point.
We need to do something about $\mu^*(E \cap B_N)$
and somehow relate it to $\mu^*(E \cap B)$.
We can try and see that
\begin{equation*}
  \mu^*(E \cap B_N) \leq \sum_{n=1}^{N} \mu^*(E \cap A_n).
\end{equation*}
Notice that in the case of \hlnotec{equality}, we would have
\begin{equation*}
  \mu^*(E) \geq \sum_{n=1}^{N} \mu^*(E \cap A_n) + \mu^*(E \cap B^C)
\end{equation*}
for all $N \in \mathbb{N}$.
Since $\{ \sum_{n=1}^{N} \mu^*(E \cap A_n) \}_{N}$ is an increasing sequence
in $\mathbb{R}$, we have
\begin{equation*}
  \mu^*(E) \geq \sum_{n=1}^{\infty} \mu^*(E \cap A_n) + \mu^*(E \cap B^C),
\end{equation*}
and
\begin{equation*}
  \sum_{n=1}^{\infty} \mu^*(E \cap A_n) \geq \mu^*(E \cap B)
\end{equation*}
by subadditivity since $B = \bigcup_{n=1}^{\infty} A_n$.

Unfortunately, the equality does not always hold.
But, since $\mu^*$ is an outer measure,
we can make an educated guess
\sidenote{Unproved point 2}
that given $\{ A_n \}_{n}$ a disjoint collection of sets,
\begin{equation*}
  \mu^* \left( \bigcup_{n=1}^{N} A_n \right) = \sum_{n=1}^{N} \mu^*(A_n).
\end{equation*}

Our work becomes even easier with the realization of \nameref{homework:4}.
Proving that all of our above argument works for the case of
$\{ A_n \}_{n} \subseteq \mathfrak{M}$ being disjoint,
is sufficient to prove that $\mathfrak{M}$ is indeed a $\sigma$-algebra.

% chapter deep_dives_into_proofs (end)

\chapter{Common Themes and Tricks}%
\label{chp:common_themes_and_tricks}
% chapter common_themes_and_tricks

\section{Re-represent an arbitrary union using disjoint sets}%
\label{sec:re_represent_an_arbitrary_union_using_disjoint_sets}

A common trick in measure theory,
especially when it comes to a collection of sets,
is to represent its union as a disjoint union of sets.
This is a useful trick because measures simply add over disjoint sets,
instead of just having \hlnotea{subadditivity}.

\begin{eg}\label{eg:disjoint_rep_of_countable_union}
  Given a collection $\{ A_n \}_{n}$ of sets, we may define a collection of
  disjoint sets whose union is $\bigcup_{n} A_n$ as such:
  \begin{align*}
    F_1 &= A_1 \\
    F_2 &= A_2 \setminus A_1 \\
    F_3 &= A_3 \setminus (A_1 \cup A_2) \\
        &\vdots \\
    F_n &= A_n \setminus \bigcup_{i=1}^{n-1} A_i \\
        &\vdots
  \end{align*}
\end{eg}

\begin{eg}\label{eg:disjoint_rep_of_increasing_countable_union}
  Given an increasing collection $\{ A_n \}_{n}$ of sets, i.e.
  \begin{equation*}
    A_1 \subseteq A_2 \subseteq A_3 \subseteq \hdots,
  \end{equation*}
  we may represent the countable union of the $A_n$'s as such:
  let
  \begin{align*}
    F_1 &= A_1 \\
    F_2 &= A_2 \setminus A_1 \\
    F_3 &= A_3 \setminus A_2 \\
        &\vdots \\
    Fn &= A_n \setminus A_{n-1} \\
       &\vdots
  \end{align*}
\end{eg}

\begin{remark}
  The reason why we simply consider $F_n = A_n \setminus A_{n-1}$ instead
  of having to take a union up to the $(n-1)$\textsuperscript{th}
  set in \cref{eg:disjoint_rep_of_increasing_countable_union}
  is because
  \begin{equation}\label{eq:finite_union_of_an_increasing_sequence_of_sets}
    \bigcup_{i=1}^{n-1} A_i = A_{n-1}.
  \end{equation}

  The reader may also notice that
  \cref{eg:disjoint_rep_of_increasing_countable_union}
  is an application of \cref{eg:disjoint_rep_of_countable_union}
  just because of \cref{eq:finite_union_of_an_increasing_sequence_of_sets}.
\end{remark}

\section{Abusing $\sigma$-algebras}%
\label{sec:abusing_sigma_algebras}

When we discuss about a property within the realm of $\sigma$-algebras,
one should remain aware that one of the options available to them
when working on a proof, is to show that the set that contains elements
that allows the property to hold is itself a $\sigma$-algebra.

In particular, if $P$ is the property of which we want to show is true,
then we may be able to show that
\begin{equation*}
  \mathcal{A} \coloneqq \{ x : P(x) \}
\end{equation*}
is a $\sigma$-algebra to complete our proof.

% chapter common_themes_and_tricks (end)

\backmatter

\fancyhead[LE]{\thepage \enspace \textsl{\leftmark}}

% \nobibliography*
\bibliography{references}

\printindex

\end{document}
% vim:tw=80:fdm=syntax

