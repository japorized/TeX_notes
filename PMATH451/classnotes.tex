% !TEX TS-program = pdflatex
\documentclass[notoc,notitlepage]{tufte-book}
% \nonstopmode % uncomment to enable nonstopmode

\usepackage{classnotetitle}

\title{PMATH451 --- Measure and Integration}
\author{Johnson Ng}
\subtitle{Class notes for Fall 2019}
\credentials{BMath (Hons), Pure Mathematics major, Actuarial Science Minor}
\institution{University of Waterloo}

\input{latex-classnotes-preamble.tex}

\theoremprework{\textcolor{cyan}{\hrule height 2pt width \textwidth}}
\theoremheaderfont{\color{cyan}\normalfont\bfseries}
\theorempostwork{\textcolor{cyan}{\hrule height 2pt width \textwidth}}
\theoremindent10pt
\newtheorem*{homework}{\faCogs\ Homework}

\begin{document}
\input{latex-classnotes-header.tex}

\chapter*{Preface}%
\label{chp:preface}
\addcontentsline{toc}{chapter}{Preface}
% chapter preface

Assignment problems is introduced in class as we go,
so we have the special environment \textcolor{cyan}{homework}
for these in this note.

% chapter preface (end)

\chapter{Lecture 1 Sep 04th, 2019}%
\label{chp:lecture_1_sep_04th_2019}
% chapter lecture_1_sep_04th_2019

\section{Motivation for the Study of Measures}%
\label{sec:motivation_for_the_study_of_measures}
% section motivation_for_the_study_of_measures

Recall Riemann integration.

\begin{defnnonum}[Riemann Integration]\index{Riemann Integration}\label{defn:riemann_integration}
  Let $f : [a, b] \to \mathbb{R}$ be a \hlnotec{bounded} function.
  We call
  \begin{equation*}
    P = \{ a = x_0 < x_1 < \hdots < x_n = b \} \subseteq [a, b]
  \end{equation*}
  a \hldefn{partition} of $[a, b]$,
  and
  \begin{equation*}
    \Delta x_i = x_i - x_{i-1}
  \end{equation*}
  as the \hlnoteb{length of the $i$\textsuperscript{th} interval}
  for $i = 1, \ldots, n$.
  \begin{marginfigure}
    \centering
    \begin{tikzpicture}
      \draw[->] (-0.5, 0) -- (3, 0);
      \draw[->] (0, -0.5) -- (0, 3);
      \draw[domain=0.5:2.2,range=0:3] plot ({\x}, {-(\x-1)*(\x-1) + 2});
      \node[label={270:{$x_{i-1}$}}] at (0.5, 0) {|};
      \node[label={270:{$x_{i}$}}] at (2.2, 0) {|};
      \draw[dashed] (1, 2) -- (-0.5, 2) node[left] {$M_i$};
      \draw[dashed] (2.2, 0.56) -- (-0.5, 0.56) node[left] {$m_i$};
    \end{tikzpicture}
    \caption{Idea of Riemann integration}\label{fig:idea_of_riemann_integration}
  \end{marginfigure}
  Let
  \begin{equation*}
    M_i = \sup \{ f(x) : x \in [x_{i-1}, x_i] \}
  \end{equation*}
  be the \hlnoteb{supremum of $f$ on the $i$\textsuperscript{th} interval},
  and 
  \begin{equation*}
    m_i = \inf \{ f(x) : x \in [x_{i-1}, x_i] \}
  \end{equation*}
  be the \hlnoteb{infimum of $f$ on the $i$\textsuperscript{th} interval}.
  We define the \hldefn{Riemann upper sum} as
  \begin{equation*}
    U(f, P) = \sum_{i} M_i \Delta x_i,
  \end{equation*}
  and the \hldefn{Riemann lower sum} as
  \begin{equation*}
    L(f, P) = \sum_{i} m_i \Delta x_i. 
  \end{equation*}
  We define the \hldefn{Riemann upper integral} as
  \begin{equation*}
    \overline{\int_{a}^{b}} f \dif{x} = \inf_{P} U(f, P)
  \end{equation*}
  and the \hldefn{Riemann lower integral} as
  \begin{equation*}
    \underline{\int_{a}^{b}} f \dif{x} = \sup L(f, P).
  \end{equation*}
  We say that $f$ is \hldefn{Riemann integrable} if
  \begin{equation*}
    \overline{\int_{a}^{b}} f \dif{x}
    = \underline{\int_{a}^{b}} f \dif{x},
  \end{equation*}
  and we write the integral of $f$ as
  \begin{equation*}
    \int_{a}^{b} f \dif{x}
    = \overline{\int_{a}^{b}} f \dif{x}
    = \underline{\int_{a}^{b}} f \dif{x}.
  \end{equation*}
\end{defnnonum}

As hyped up as one does earlier in university about Riemann integration,
there are functions that are not Riemann integrable!

\begin{eg}
  Consider a function $f : [0, 1] \to \mathbb{R}$ given by
  \begin{equation*}
    f(x) = \begin{cases}
      1 & x \in \mathbb{Q} \\
      0 & x \notin \mathbb{Q}
    \end{cases}.
  \end{equation*}
  Then
  \begin{equation*}
    \overline{\int_{a}^{b}} f \dif{x} = 1 \text{ and }
    \underline{\int_{a}^{b}} f \dif{x} = 0.
  \end{equation*}
  Thus $f$ is not Riemann integrable.
\end{eg}

\begin{note}[Shortcomings of the Riemann integral]
  \begin{enumerate}
    \item We cannot characterize functions that are Riemann integrable,
      i.e. we do not have a list of characteristics that we can check
      against to see if a function is Riemann integrable.

      This remained an open problem in the earlier 1920s.
    \item The Riemann integral behaves badly when it comes to
      pointwise limits of functions. The next example shall illustrate
      this.
    \item The Riemann integral is awkward when $f$ is unbounded.
      In particular, we used to hack our way around by looking at
      whether the Riemann integral converges to some value the function
      approaches the unbounded point, and then ``conclude''
      that the integral is the limit of that convergence.
    \item Recall that the \hlnotea{Fundamental Theorem of Calculus} states
      that
      \begin{equation*}
        \frac{\dif{}}{\dif{x}} \int_{a}^{x} f(t) \dif{t} = f(x).
      \end{equation*}
      We know that this works for Riemann integrals.
      By the first shortcoming, the problem here is that we do not
      fully know what are the functions that the Fundamental Theorem
      is true for.
    \item In PMATH450, we saw that Fourier developed the Fourier series,
      which is an extremely useful tool
      in solving \hlnotea{Differential Equations} using sines and cosines.
      However, the convergence of the Fourier series remains largely
      unexplained by Fourier, and we have but developed
      some roundabout ways of showing some convergence.
    \item Consider the set $R$ if Riemann integrable functions
      on the interval $[a, b]$.
      The set $R$ has a natural metric:
      \begin{equation*}
        d(f, g) = \int_{a}^{b} \abs{f - g} \dif{x}.
      \end{equation*}
      However, the metric space $(R, d)$ is \hlnotec{not complete}.
      This means many of our favorite results in PMATH351 are not usable!
    \item There are many functions that seem like they should have
      an integral, but turned out that they did not under Riemann integration.
  \end{enumerate}
\end{note}

\begin{eg}[Pointwise Limits of Riemann Integrable Functions is not necessarily Riemann Integrable]
  Let $\mathbb{Q} = \{ x_n \}_{n \in \mathbb{N}}$. Then
  consider a sequence of functions
  \begin{equation*}
    f_n(x) = \begin{cases}
      1 & x \in \{ x_1, \ldots, x_n \} \\
      0 & x \notin \{ x_1, \ldots, x_n \}
    \end{cases}.
  \end{equation*}
  It is rather clear that
  \begin{equation*}
    \overline{\int_{a}^{b}} f \dif{x} = \underline{\int_{a}^{b}} f \dif{x} = 0.
  \end{equation*}
  However, the pointwise limit of the $f_n$'s, and that is
  \begin{equation*}
    \lim_{n \to \infty} f_n(x) = f(x) = \begin{cases}
      1 & x \in \mathbb{Q} \\
      0 & x \notin \mathbb{Q}
    \end{cases},
  \end{equation*}
  is, as mentioned in the last example, not Riemann integrable.
\end{eg}

To address the shortcomings of the Riemann integral,
Henri Lebesgue developed the \hlnotea{Lebesgue integral},
of which we have seen in PMATH450.

Instead of dividing the $x$-axis,
Lebesgue decided to divide the $y$-axis first.

If the range of a function $f$ is $[c, d]$, where $c, d$ can be infinite,
then we partition the interval such that
\begin{equation*}
  P = \{ c = y_0 < y_1 < \hdots < y_n = d \},
\end{equation*}
and we define
\begin{equation*}
  E_i = \{ x : f(x) \in [y_{i-1}, y_i] \}.
\end{equation*}
Then if $A_i$ is the area of the ``rectangle'' for
the $i$\textsuperscript{th} interval of $[c, d]$, we have
\begin{equation*}
  y_{i-1} \cdot \ell(E_i) \leq A_i \leq y_i \cdot \ell(E_i),
\end{equation*}
where $\ell(E_i)$ is the \hlnotea{Lebesgue measure} of the set $E_i$.
Then if we let $\int_{a}^{b} f$ denote the Lebesgue integral of $f$,
we would expect
\begin{equation*}
  \sum_{i=1}^{n} y_{i-1} \cdot \ell(E_i)
  \leq \int_{a}^{b} f
  \leq \sum_{i=1}^{n} y_i \cdot \ell(E_i).
\end{equation*}
However, to truly understand what this means,
we need to understand what the Lebesgue measure is.

Furthermore, recall that in PMATH450, we saw that not all
sets, in $\mathbb{R}$ for example, are measurable,
and for `good' reasons, there always exists non-measurable sets.

% section motivation_for_the_study_of_measures (end)

\section{Algebras and \texorpdfstring{$\sigma$}{sigma}-Algebra of Sets}%
\label{sec:algebras_and_sigma_algebra_of_sets}
% section algebras_and_sigma_algebra_of_sets

\marginnote{For this course, we shall use the convention that
\begin{itemize}
  \item the `ambient' space $X$ is always non-empty;
  \item $\mathcal{P}(X)$, the power set of $X$, has non-trivial elements; and
  \item we denote $A^C = \{ x \in X : x \notin A \}$ for $A \subseteq X$.
\end{itemize}
}

\begin{defn}[Algebra of Sets]\index{Algebra of Sets}\label{defn:algebra_of_sets}
  Given $X$, a non-empty collection of subsets of $X$,
  i.e. $\emptyset \neq \mathcal{A} \subseteq \mathcal{P}(X)$,
  is called an \hlnoteb{algebra of sets} of $X$ provided that:
  \begin{enumerate}
    \item $A_1, \ldots, A_n \in \mathcal{A} \implies
      \bigcup_{i=1}^{n} A_i \in \mathcal{A}$; and
    \item $A \in \mathcal{A} => A^C \in \mathcal{A}$.
  \end{enumerate}
\end{defn}

\begin{propo}[Properties of Algebra of Sets]\index{Properties of Algebra of Sets}\label{propo:properties_of_algebra_of_sets}
  If $\mathcal{A}$ is an algebra of sets of $X$, then
  \begin{enumerate}
    \setcounter{enumi}{2}
    \item $\emptyset, X \in \mathcal{A}$;
    \item $A, B \in \mathcal{A} \implies
      A \setminus B = \{ x \in X \mid x \in A \land x \notin B \} \in
      \mathcal{A}$ ; and
    \item $A_1, \ldots, A_n \in \mathcal{A} \implies
      \bigcap_{i=1}^{n} A_i \in \mathcal{A}$.
  \end{enumerate}
\end{propo}

\begin{proof}
  \begin{enumerate}
    \setcounter{enumi}{2}
    \item $\mathcal{A} \neq \emptyset \implies \exists A \in \mathcal{A}
      \implies A^C \in \mathcal{A} \implies A \cup A^C = X \in \mathcal{A}
      \implies \emptyset = X^C \in \mathcal{A}$.
    \item $A, B \in \mathcal{A} \implies A^C \in \mathcal{A}
      \implies A^C \cup B \in \mathcal{A}
      \implies A \setminus B = (A^C \cup B)^C \in \mathcal{A}$.
    \item (\hlnotea{De Morgan's Law})
      Notice that
      $(A_1 \cap A_2 \cap \hdots \cap A_n)^C
      = A_1^C \cup A_2^C \cup \hdots A_n^C \in \mathcal{A}$
      since $A_i^C \in \mathcal{A}$.
      Thus the complement
      \begin{equation*}
        A_1 \cap A_2 \cap \hdots \cap A_n \in \mathcal{A}.
      \end{equation*}
  \end{enumerate}
\end{proof}

\begin{defn}[$\sigma$-Algebra of Sets]\index{$\sigma$-Algebra of Sets}\label{defn:_sigma_algebra_of_sets}
  Given $X$ and $\emptyset \neq \mathcal{A} \subseteq \mathcal{P}(X)$,
  we say that $\mathcal{A}$ is a \hlnoteb{$\sigma$-algebra of sets}
  of $X$ if it is an algebra of sets and
  \begin{equation*}
    \forall A_n \in \mathcal{A}, n \in \mathbb{N}, \quad
    \bigcup_{n \in \mathbb{N}} A_n \in \mathcal{A}.
  \end{equation*}
\end{defn}

\begin{eg}
  \begin{enumerate}
    \item $\mathcal{P}(X)$ is a $\sigma$-algebra.
    \item Consider $X$ as an infinite set.
      We say that a set $A$ is \hldefn{cofinite} if $A^C$ is finite.
      Let
      \begin{equation*}
        \mathcal{A} \coloneqq \{ A \in \mathcal{P}(X)
          \mid A \text{ is finite or cofinite } \}.
      \end{equation*}
      Then $\mathcal{A}$ is an algebra of sets:
      \begin{itemize}
        \item finite union of finite sets remains finite;
        \item finite union of finite and cofinite sets remains cofinite; and
        \item complement of finite sets are the cofinite sets and vice versa.
      \end{itemize}
      However, $\mathcal{A}$ is \hlnotec{not} a $\sigma$-algebra:
      consider $A_n = \{ 2^n \} \subseteq X = \mathbb{N}$,
      which we then realize that
      \begin{equation*}
        \bigcup_{n \in \mathbb{N}} A_n = \text{ set of all even numbers },
      \end{equation*}
      but the set of all even numbers is clearly not finite, and
      its complement, which is the set of all odd numbers, is not finite.
    \item Consider $X$ as an uncountable set.
      We say that a set $A$ is \hldefn{co-countable} if $A^C$ is countable.
      \sidenote{Recall that a set $A$ is said to be countable if
      there is a one-to-one correspondence between elements of $A$
      and the natural numbers.}
      The set
      \begin{equation*}
        \mathcal{A} \coloneqq \{ A \subseteq X
          \mid A \text{ is countable or co-countable } \}
      \end{equation*}
      is a $\sigma$-algebra:
      \begin{itemize}
        \item countable union of countable sets is countable;
        \item countable union of countable
          and co-countable sets is co-countable; and
        \item complement of countable sets are co-countable and vice versa.
      \end{itemize}
  \end{enumerate}
\end{eg}

% section algebras_and_sigma_algebra_of_sets (end)

% chapter lecture_1_sep_04th_2019 (end)

\chapter{Lecture 2 Sep 06th 2019}%
\label{chp:lecture_2_sep_06th_2019}
% chapter lecture_2_seep_06th_2019

\section{Algebra and \texorpdfstring{$\sigma$}{Sigma}-algebra of Sets (Continued)}%
\label{sec:algebra_and_sigma_algebra_of_sets_continued}
% section algebra_and_sigma_algebra_of_sets_continued

We've seen some examples of $\sigma$-algebras.
Let's now look at some other important properties of $\sigma$-algebras.

\begin{propo}[Closure of $\sigma$-algebras under Countable Intersection]\label{propo:closure_of_sigma_algebras_under_countable_intersection}
  Let $X$ be a set, $\mathcal{A}$ a $\sigma$-algebra on $X$.
  If $A_n \in \mathcal{A}$ for each $n \in \mathbb{N}$,
  then $\bigcap_{n} A_n \in \mathcal{A}$.
\end{propo}

This follows rather similarly to \cref{propo:properties_of_algebra_of_sets}
where we used \hlnotea{De Morgan's Law}.

\begin{proof}
  We observe that
  \begin{align*}
    A_n \in \mathcal{A}
    &\implies A_n^C \in \mathcal{A} \\
    &\implies \bigcup_{n} A_n^C \in \mathcal{A} \\
    &\implies \bigcap_{n} A_n = \left( \bigcup_{n} A_n^C \right)^C \in \mathcal{A}.
  \end{align*}
\end{proof}

Let $\mathcal{A}_\alpha \subseteq \mathcal{P}(X)$,
where $\alpha$ is from some index set.
We denote
\begin{equation*}
  \bigcap_{\alpha} \mathcal{A}_\alpha = \{ A \subseteq X
    : A \in \mathcal{A}_\alpha,\; \forall \alpha \}.
\end{equation*}

\begin{propo}[Existence of the `Smallest' $\sigma$-algebra on a Set]\label{propo:existence_of_the_smallest_sigma_algebra_on_a_set}
  Let $X$ be a set and $\{\mathcal{A}_\alpha\}_\alpha$ as
  a collection of $\sigma$-algebras on $X$.
  Then $\bigcap_{\alpha} A_\alpha$ is a $\sigma$-algebra.
\end{propo}

\begin{proof}
  \begin{align*}
  A \in \bigcap_{\alpha} \mathcal{A}_\alpha
  &\implies \forall \alpha,\, A \in \mathcal{A}_\alpha \\
  &\implies \forall \alpha,\, A^C \in \mathcal{A}_\alpha \\
  &\implies A^C \in \bigcap_{\alpha} \mathcal{A}_\alpha
  \end{align*}
  and
  \begin{align*}
  \forall n \in \mathbb{N},\, A_n \in \bigcap_{\alpha} \mathcal{A}_\alpha
  &\implies \forall n \in \mathbb{N},\, \forall \alpha,\,
    A_n \in \mathcal{A}_\alpha \\
  &\implies \forall \alpha,\, \bigcup_{n} A_n \in \mathcal{A}_\alpha \\
  &\implies \bigcup_{n} A_n \in \bigcap_{\alpha} \mathcal{A}_\alpha.
  \end{align*}
\end{proof}

Due to the above proposition, the following definition is well-defined.

\begin{defn}[Generator of a $\sigma$-algebra]\index{Generator of a $\sigma$-algebra}\label{defn:generator_of_a_sigma_algebra}
  Let $X$ be a set, and $\xi \subseteq \mathcal{P}(X)$ has some
  non-trivial set(s).
  Consider all $\sigma$-algebras $\mathcal{A}_\alpha$
  with the property that $\xi \subseteq \mathcal{A}_\alpha$.
  Then we say that $\bigcap_{\alpha} \mathcal{A}_\alpha$
  is the $\sigma$-algebra generated by $\xi$,
  and we denote this generated $\sigma$-algebra as
  \begin{equation*}
    \mathfrak{M}(\xi) = \bigcap_{\alpha} \mathcal{A}_\alpha.
  \end{equation*}
\end{defn}

\begin{remark}
  \begin{enumerate}
    \item It is clear from the definition that if $\mathcal{A}$
      is a $\sigma$-algebra on $X$ and $\xi \subseteq \mathcal{A}$,
      then $\mathfrak{M}(\xi) \subseteq \mathcal{A}$.
    \item We often say that $\mathfrak{M}(\xi)$ is the
      ``smallest $\sigma$-algebra containing $\xi$''.
  \end{enumerate}
\end{remark}

The following is an example of such a $\sigma$-algebra.

\begin{defn}[Borel $\sigma$-algebra]\index{Borel $\sigma$-algebra}\label{defn:borel_sigma_algebra}
  Let $X$ be a metric space (or topological space).
  The $\sigma$-algebra generated by the \hlnotec{open subsets}
  of $X$ is called the \hlnoteb{Borel $\sigma$-algebra},
  of which we denote by $\mathfrak{B}(X)$.
\end{defn}

\begin{remark}[Some sets in $\mathfrak{B}(X)$]
  Given an arbitrary metric space (or topological space) $X$.
  It is often hard to firmly grasp what kind of sets are in
  the Borel $\sigma$-algebra $\mathfrak{B}(X)$.
  The following are some examples that are in $\mathfrak{B}(X)$.
  \begin{enumerate}
    \item Let $\{ \mathcal{O}_n \}_{n \in \mathbb{N}}$ denote
      a countable collection of open sets.
      By \cref{propo:closure_of_sigma_algebras_under_countable_intersection},
      $\bigcap_{n} \mathcal{O}_n \in \mathfrak{B}(X)$.
      We call these countable union of open sets
      as $G_\delta$ sets.
    \item Let $\{ \mathcal{F}_n \}_{n \in \mathbb{N}}$ denote
      a countable collection of closed sets.
      By \cref{propo:closure_of_sigma_algebras_under_countable_intersection},
      $\bigcup_{n} \mathcal{F}_n \in \mathfrak{B}(X)$.
      We call these countable intersection of closed sets
      as $F_\sigma$ sets.
    \item Let $\{ H_n \}$ be a countable collection of $G_\delta$ sets.
      Then $\bigcup_{n} H_n \in \mathfrak{B}(X)$.
      These are called the $G_{\delta \sigma}$ sets.
    \item Let $\{ K_n \}$ be a countable collection of $F_\sigma$ sets.
      Then $\bigcap_{n} K_n \in \mathfrak{B}(X)$.
      These are called the $F_{\sigma \delta}$ sets.
  \end{enumerate}
  We can continue constructing the $G_{\delta \sigma \hdots}$
  and $F_{\sigma \delta \hdots}$ similarly,
  and all these sets belong to the Borel $\sigma$-algebra
  $\mathfrak{B}(X)$.
\end{remark}

\begin{propo}[Other Formulations of the Borel $\sigma$-algebra (aka Proposition 1.2)]\label{propo:other_formulations_of_the_borel_sigma_algebra}\label{propo:1.2}
  The following collection of sets are all equal:
  \begin{enumerate}
    \item $\mathfrak{B}_1 = \mathfrak{B}(\mathbb{R})$;
    \item $\mathfrak{B}_2 =$ $\sigma$-algebra generated by open intervals
      (e.g. $(a, b)$);
    \item $\mathfrak{B}_3 =$ $\sigma$-algebra generated by closed intervals
      (e.g. $[a, b]$);
    \item $\mathfrak{B}_4 =$ $\sigma$-algebra generated by half-open intervals
      (e.g. $(a, b]$);
    \item $\mathfrak{B}_5 =$ $\sigma$-algebra generated by $(-\infty, a)$
      and $(b, \infty)$; and
    \item $\mathfrak{B}_6 =$ $\sigma$-algebra generated by $(-\infty, a]$
      and $[b, \infty)$.
  \end{enumerate}
\end{propo}

As commented before, it is often hard knowing that is in
a Borel $\sigma$-algebra, and what is not, despite knowing
what its generator is.
However, when talking about containments, this is a fairly
straightforward discussion thanks to
its closure under countable unions and
\cref{propo:closure_of_sigma_algebras_under_countable_intersection}.
We simply need to talk about the generators.

\begin{proof}
  \hlbnoted{$\mathfrak{B}_2 \subseteq \mathfrak{B}_1$}
  Given an arbitrary generator $(a, b)$ in $\mathfrak{B}_2$,
  we know that $(a, b)$ is an open set,
  and clearly $(a, b) \subseteq \mathbb{R}$.
  Thus $(a, b) \in \mathfrak{B}_1$,
  so $\mathfrak{B}_2 \subseteq \mathfrak{B}_1$.

  \noindent
  \hlbnoted{$\mathfrak{B}_3 \subseteq \mathfrak{B}_2$}
  Given an arbitrary generator $[a, b]$ of $\mathfrak{B}_2$,
  we have
  \begin{equation*}
    [a, b] = \bigcap_{n} \left( a - \frac{1}{n},\, b + \frac{1}{n} \right)
      \in \mathfrak{B}_2.
  \end{equation*}
  Thus $\mathfrak{B}_3 \subseteq \mathfrak{B}_2$.

  \noindent
  \hlbnoted{$\mathfrak{B}_4 \subseteq \mathfrak{B}_3$}
  Given an arbitrary generator $(a, b]$ of $\mathfrak{B}_4$,
  \begin{equation*}
    (a, b] = \bigcup_{n} \left[ a + \frac{1}{n},\, b \right]
      \in \mathfrak{B}_3.
  \end{equation*}
  Thus $\mathfrak{B}_4 \subseteq \mathfrak{B}_3$.

  \noindent
  \hlbnoted{$\mathfrak{B}_5 \subseteq \mathfrak{B}_4$}
  Given an arbitrary generator $(-\infty, a)$ for $\mathfrak{B}_5$,
  \begin{equation*}
    (-\infty, a) = \bigcup_{n} \left( -\infty,\, a - \frac{1}{n} \right)
      \in \mathfrak{B}_4.
  \end{equation*}
  On the other hand, for $(b, \infty)$ in $\mathfrak{B}_5$,
  \begin{equation*}
    (b, \infty) = \bigcup_{n} (b, n) \in \mathfrak{B}_4.
  \end{equation*}

  \noindent
  \hlbnoted{$\mathfrak{B}_6 \subseteq \mathfrak{B}_5$}
  We have that
  \begin{equation*}
    (-\infty, a] = \bigcap_{n} \left( -\infty,\, a + \frac{1}{n} \right)
      \in \mathfrak{B}_5
  \end{equation*}
  and
  \begin{equation*}
    [b, \infty) = \bigcap_{n} \left( b - \frac{1}{n}, \infty \right)
      \in \mathfrak{B}_5.
  \end{equation*}

  \noindent
  \hlbnoted{$\mathfrak{B}_1 \subseteq \mathfrak{B}_6$}
  Let $c < d \in \mathbb{R}$.
  Notice that
  \begin{equation*}
    (-\infty, d] \cap [c, \infty) = [c, d] \in \mathfrak{B}_6.
  \end{equation*}
  Furthermore,
  \begin{equation*}
    (c, d) = \bigcup_{n} \left[ c + \frac{1}{n},\, d - \frac{1}{n} \right]
      \in \mathfrak{B}_6.
  \end{equation*}
  Recall that given an open set $\mathcal{O} \subseteq \mathbb{R}$,
  we have
  \begin{equation*}
    \mathcal{O} = \bigcup \{ (c, d) \subseteq \mathcal{O} : c, d \in \mathbb{Q} \},
  \end{equation*}
  which shows that $\mathcal{O}$ is a countable union of open sets
  (with rational endpoints).
  It follows that $\mathcal{O} \in \mathfrak{B}_6$ and so
  $\mathfrak{B}_1 \subseteq \mathfrak{B}_6$.
\end{proof}

\begin{ex}
  Show that $\mathfrak{B}(\mathbb{R}^2)$ is generated by
  open rectangles $(a, b) \times (c, d)$.
\end{ex}

\begin{defn}[Infinitely Often]\index{Infinitely Often}\label{defn:infinitely_often}
  Given $E_n \subseteq X$ for $n \in \mathbb{N}$,
  we say that $x \in E_n$ \hlnoteb{infinitely often (i.o.)} if
  \begin{equation*}
    \{ n : x \in E_n \}
  \end{equation*}
  is an \hlnotec{infinite set}.
  We typically let
  \begin{equation*}
    A \coloneqq \{ x \in X : x \in E_n \text{ i.o. } \}
  \end{equation*}
  be the set of $x$'s that are in the $E_n$'s infinitely often.
\end{defn}

\begin{defn}[Almost always]\index{Almost always}\label{defn:almost_always}
  Given $E_n \subseteq X$ for $n \in \mathbb{N}$,
  we say that $x \in E_n$ \hlnoteb{almost always (a.a.)} if
  \begin{equation*}
    \{ n : x \notin E_n \}
  \end{equation*}
  is a \hlnotec{finite set}.
  We typically let
  \begin{equation*}
    B \coloneqq \{ x \in X : x \in E_n \text{ a.a. } \}
  \end{equation*}
  be the set of $x$'s that are in the $E_n$'s almost always.
\end{defn}

\begin{homework}[Homework 1]
  Let $X$ be a set, $\mathcal{A}$ a $\sigma$-algebra on $X$,
  and $E_n \in \mathcal{A}$ for $n \in \mathbb{N}$.
  Prove that
  \begin{equation*}
    A \coloneqq \{ x \in X : x \in E_n \text{ i.o. } \}
  \end{equation*}
  and
  \begin{equation*}
    B \coloneqq \{ x \in X : x \in E_n \text{ a.a. } \}
  \end{equation*}
  are both in $\mathcal{A}$.
\end{homework}

\begin{defn}[Characteristic Function]\index{Characteristic Function}\label{defn:characteristic_function}
  Let $E \subseteq X$. We call the function 
  \begin{equation*}
    \chi_E(x) = \begin{cases}
      1 & x \in E \\
      0 & x \notin E
    \end{cases}
  \end{equation*}
  the \hlnoteb{characteristic function} of $E$.
\end{defn}

\begin{homework}[Homework 2 -- A review on limsup and liminf]
  Let $E_n \subseteq X$ for $n \in \mathbb{N}$, and
  \begin{gather*}
    A \coloneqq \{ x \in X : x \in E_n \text{ i.o. } \} \\
    B \coloneqq \{ x \in X : x \in E_n \text{ a.a. } \}.
  \end{gather*}
  Show that
  \begin{gather*}
    \chi_A(x) = \limsup_{n} \chi_{E_n}(x) \\
    \chi_B(x) = \liminf_{n} \chi_{E_n}(x).
  \end{gather*}
\end{homework}

\begin{remark}
  Due to the above result, some people write
  \begin{gather*}
    A = \limsup E_n \\
    B = \liminf E_n.
  \end{gather*}
\end{remark}

% section algebra_and_sigma_algebra_of_sets_continued (end)

\section{Measures}%
\label{sec:measures}
% section measures

\begin{defn}[Measure]\index{Measure}\label{defn:measure}
  Let $X$ be a set and $\mathcal{A}$ a $\sigma$-algebra of subsets of $X$.
  A function $\mu : \mathcal{A} \to [0, \infty]$ is called
  a \hlnoteb{measure} on $\mathcal{A}$ provided that:
  \begin{enumerate}
    \item $\mu(\emptyset) = 0$; and
    \item if $E_n \in \mathcal{A}$ for each $n \in \mathbb{N}$,
      and $\{ E_n \}$ is disjoint, we have
      \begin{equation*}
        \mu \left( \bigcup_{n} E_n \right) = \sum_{n} \mu(E_n).
      \end{equation*}
  \end{enumerate}
\end{defn}

% section measures (end)

% chapter lecture_2_sep_06th_2019 (end)

\appendix

\backmatter

\fancyhead[LE]{\thepage \enspace \textsl{\leftmark}}

% \nobibliography*
\bibliography{references}

\printindex

\end{document}
% vim:tw=80:fdm=syntax

